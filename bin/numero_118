#!/usr/bin/env node

var crawler = require("../edisonFramework/crawler");
var request = require("request");
var number = '0184204446';
var pass = "3t9V8gbnUx11n1Fu6Ja0w8K861f77h6Dn22E8Ur563N7qXb8rl";
var data = {"status":"ok","logs":[{"date":"Thu Mar 26 2015 17:40:35 GMT+0100","origin":"0637436615","duration":"00:00:06","status":"ReÃ§u"}],"sessionId":"bb71961-ovh.56531bcb2a0af1c4fe0d5180316ead93","seconds":37.949};


        request.post({url:'http://electricien13003.com/alvin/118actualise.php', form: {data:data, password:pass}}, function(err,httpResponse,body){
        	console.log(err, body);
        })
        return (0)

  var qtime = Date.now();
  crawler.getOvhSessionId(function(err, sessionId) {
    console.log("==>", err, sessionId)
    if (err)
      console.log(err);
    else {
      crawler.getOvhIncomingCalls(number, sessionId, function(data) {
        data.seconds = (Date.now() - qtime) / 1000;
        console.log(JSON.stringify(data));
        return(0);
        request.post({url:'http://electricien13003.com/alvin/118actualise.php', form: {data:data, password:pass}}, function(err,httpResponse,body){
        	console.log(err, body);
        })
      });
    }
  })
