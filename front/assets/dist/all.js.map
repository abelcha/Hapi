{"version":3,"sources":["routes.js","Directives/allowPatern.js","Directives/capitalize.js","Directives/context-menu.js","Directives/credit-card.js","Directives/dropdown-row.js","Directives/enter.js","Directives/lineup-intervention.js","Directives/rightClick.js","Directives/sideLink.js","Filters/contactFilter.js","Filters/crlf.js","Filters/loginify.js","Filters/relativeDate.js","Filters/reverse.js","Filters/tableFilter.js","Templates/info-facture.js","Templates/info-fourniture.js","Templates/listeIntervention.js","Services/Signalement.js","Services/TabContainer.js","Services/address.js","Services/api.js","Services/artisanClass.js","Services/compta.js","Services/contextMenu.js","Services/dataProvider.js","Services/devisClass.js","Services/dialog.js","Services/fourniture.js","Services/interventionClass.js","Services/lazy-scroll.js","Services/map.js","Services/mapAutocomplete.js","Services/openPost.js","Services/productsList.js","Services/socketFactory.js","Services/tabs.js","Services/taskList.js","Services/user.js","Pages/Artisan/artisan-categorie.js","Pages/Artisan/artisanController.js","Pages/Archives/archivesController.js","Pages/Avoirs/avoirs.js","Pages/ContactArtisan/contactArtisanController.js","Pages/Dashboard/dashboardController.js","Pages/Intervention/artisanFileUpload.js","Pages/Intervention/autocomplete-map.js","Pages/Intervention/credit-card.js","Pages/Intervention/devisController.js","Pages/Intervention/info-categorie.js","Pages/Intervention/info-client.js","Pages/Intervention/info-compta.js","Pages/Intervention/interventionController.js","Pages/Intervention/produit.js","Pages/LPA/LPA.js","Pages/ListeArtisan/listeArtisanController.js","Pages/ListeDevis/listeDevisController.js","Pages/ListeInterventions/listeInterventionsController.js","Pages/Search/searchController.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACZA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChLA;AACA;AACA;AACA;AACA;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvBA;AACA;AACA;AACA;AACA;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACbA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9RA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvFA;AACA;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"all.js","sourcesContent":["angular.module('edison', ['browserify', 'ui.slimscroll', 'ngMaterial', 'lumx', 'ngAnimate', 'xeditable', 'btford.socket-io', 'ngFileUpload', 'pickadate', 'ngRoute', 'ngResource', 'ngTable', 'ngMap'])\n    .config(function($mdThemingProvider) {\n        \"use strict\";\n        $mdThemingProvider.theme('default')\n            .primaryPalette('indigo')\n            .accentPalette('blue-grey');\n    });\n\n\nangular.module('edison').controller('MainController', function($timeout, $q, DataProvider, tabContainer, $scope, socket, config, $rootScope, $location, edisonAPI, taskList, $window) {\n    \"use strict\";\n\n\n    $scope.sidebarHeight = $(\"#main-menu-bg\").height();\n    $scope.config = config;\n    $rootScope.loadingData = true;\n    $rootScope.$on('$routeChangeSuccess', function() {\n        $window.scrollTo(0, 0);\n        $rootScope.loadingData = false;\n    });\n\n    $scope.shadowClick = function(url) {\n        $location.url(url)\n    }\n    $scope.dateFormat = moment().format('llll').slice(0, -5);\n    $scope.tabs = tabContainer;\n    $scope.$watch('tabs.selectedTab', function(prev, curr) {\n        if (prev === -1 && curr !== -1) {\n            $scope.tabs.selectedTab = curr;\n        }\n    });\n    $rootScope.options = {\n        showMap: true\n    };\n    $('input[type=\"search\"]').ready(function() {\n\n        $('input[type=\"search\"]').on('keyup', function(e, w) {\n            if (e.which == 13) {\n                if ($('ul.md-autocomplete-suggestions>li').length) {\n                    $location.url('/search/' + $(this).val())\n                    $(this).val(\"\")\n                    $(this).blur()\n                }\n            }\n        });\n    })\n    $scope.searchBox = {\n        search: function(x) {\n            var deferred = $q.defer();\n            edisonAPI.searchText(x, {\n                limit: 10,\n                flat: true\n            }).success(function(resp) {\n                deferred.resolve(resp)\n            })\n            return deferred.promise;\n        },\n        change: function(x) {\n            if (x) {\n                $location.url(x.link)\n            }\n            $scope.searchText = \"\";\n        }\n    }\n\n    var reloadStats = function() {\n        edisonAPI.stats.telepro()\n            .success(function(result) {\n                $scope.userStats = _.find(result, function(e) {\n                    return e.login === $scope.user.login;\n                });\n                $rootScope.interventionsStats = result;\n            });\n    };\n\n    $rootScope.user = window.app_session\n    reloadStats();\n\n    socket.on('filterStatsReload', function(data) {\n        $scope.userStats = _.find(data, function(e) {\n            return e.login === $scope.user.login;\n        });\n        $rootScope.interventionsStats = data;\n    })\n\n    $rootScope.openTab = function(tab) {\n        console.log('-->', tab);\n    }\n\n    $rootScope.closeContextMenu = function() {\n        $rootScope.$broadcast('closeContextMenu');\n    }\n\n    var devisDataProvider = new DataProvider('devis')\n    var artisanDataProvider = new DataProvider('artisan')\n    var interventionDataProvider = new DataProvider('intervention')\n\n\n\n\n\n    var initTabs = function(baseUrl, baseHash, urlFilter) {\n        $scope.tabsInitialized = true;\n        $scope.tabs.addTab(baseUrl, {\n            hash: baseHash,\n            urlFilter: urlFilter\n        });\n        return 0;\n    };\n\n    $scope.$on(\"$locationChangeStart\", function(event) {\n        if ($rootScope.preventRouteChange) {\n            $rootScope.preventRouteChange = false;\n            return false;\n        }\n        if ($location.path() === \"/\") {\n            return 0;\n        }\n        if (!$scope.tabsInitialized) {\n            return initTabs($location.path(), $location.hash(), $location.$$search);\n        }\n        if ($location.path() !== \"/intervention\" && $location.path() !== \"/devis\" && $location.path() !== \"/artisan\") {\n            $scope.tabs.addTab($location.path(), {\n                hash: $location.hash(),\n                urlFilter: $location.$$search\n            });\n        }\n\n    });\n\n    $scope.taskList = taskList;\n\n    $scope.linkClick = function($event) {\n        $event.preventDefault();\n        $event.stopPropagation();\n    };\n\n    $scope.tabIconClick = function($event, tab) {\n        $event.preventDefault();\n        $event.stopPropagation();\n        $scope.tabs.close(tab)\n    };\n});\n\nvar getDevisList = function(edisonAPI) {\n    \"use strict\";\n    return edisonAPI.devis.list({\n        cache: true\n    });\n};\n\nvar getArtisanList = function(edisonAPI) {\n    \"use strict\";\n    return edisonAPI.artisan.list({\n        cache: true\n    });\n};\n\nvar getInterList = function(edisonAPI) {\n    \"use strict\";\n    return edisonAPI.intervention.list({\n        cache: true\n    });\n};\nvar getArtisanList = function(edisonAPI) {\n    \"use strict\";\n    return edisonAPI.artisan.list({\n        cache: true\n    });\n};\n\nvar getArtisan = function($route, $q, edisonAPI) {\n    \"use strict\";\n    var id = $route.current.params.id;\n\n    if (id.length > 10) {\n        return $q(function(resolve) {\n            resolve({\n                data: {\n                    origin: 'DEM',\n                    telephone: {},\n                    pourcentage: {\n                        deplacement: 50,\n                        maindOeuvre: 30,\n                        fourniture: 30\n                    },\n                    zoneChalandise: 30,\n                    add: {},\n                    categories: [],\n                    representant: {\n                        civilite: 'M.'\n                    },\n                }\n            });\n        });\n    } else {\n        return edisonAPI.artisan.get(id, {\n            cache: true,\n            extend: true\n        });\n    }\n};\n\nvar getIntervention = function($route, $q, edisonAPI) {\n    \"use strict\";\n    var id = $route.current.params.id;\n    if ($route.current.params.d) {\n        return edisonAPI.devis.get($route.current.params.d, {\n            select: 'date login produits tva client prixAnnonce categorie -_id'\n        });\n    } else if (id.length > 10) {\n        return edisonAPI.intervention.getTmp(id);\n    } else {\n        return edisonAPI.intervention.get(id, {\n            populate: 'sst'\n        });\n    }\n};\n\nvar getDevis = function($route, $q, edisonAPI) {\n    \"use strict\";\n    var id = $route.current.params.id;\n    if ($route.current.params.i) {\n        return edisonAPI.intervention.get($route.current.params.d, {\n            select: 'client categorie tva -_id'\n        });\n    } else if (id.length > 10) {\n        return edisonAPI.devis.getTmp(id);\n    } else {\n        return edisonAPI.devis.get(id);\n    }\n};\n\nangular.module('edison').config(function($routeProvider, $locationProvider) {\n    \"use strict\";\n    $routeProvider\n        .when('/', {\n            redirectTo: '/intervention/list',\n        })\n        .when('/intervention/list', {\n            templateUrl: \"Pages/ListeInterventions/listeInterventions.html\",\n            controller: \"InterventionsController\",\n            controllerAs: 'vm',\n        })\n        .when('/intervention/list/:fltr', {\n            templateUrl: \"Pages/ListeInterventions/listeInterventions.html\",\n            controller: \"InterventionsController\",\n            controllerAs: 'vm',\n        })\n        .when('/intervention', {\n            redirectTo: function(routeParams, path, params) {\n                var url = params.devis ? \"?d=\" + params.devis : \"\";\n                return '/intervention/' + Date.now() + url;\n            }\n        })\n        .when('/intervention/:id', {\n            templateUrl: \"Pages/Intervention/intervention.html\",\n            controller: \"InterventionController\",\n            controllerAs: \"vm\",\n            resolve: {\n                interventionPrm: getIntervention,\n            }\n        })\n        .when('/devis/list', {\n            templateUrl: \"Pages/ListeDevis/listeDevis.html\",\n            controller: \"ListeDevisController\",\n            controllerAs: 'vm',\n        })\n        .when('/devis/list/:fltr', {\n            templateUrl: \"Pages/ListeDevis/listeDevis.html\",\n            controller: \"ListeDevisController\",\n            controllerAs: \"vm\",\n        })\n        .when('/devis', {\n            redirectTo: function(routeParams, path, params) {\n                return '/devis/' + Date.now();\n            }\n        })\n        .when('/devis/:id', {\n            templateUrl: \"Pages/Intervention/devis.html\",\n            controller: \"DevisController\",\n            controllerAs: \"vm\",\n            resolve: {\n                devisPrm: getDevis,\n            }\n        })\n        .when('/artisan/contact', {\n            templateUrl: \"Pages/ListeArtisan/contactArtisan.html\",\n            controller: \"ContactArtisanController\",\n            controllerAs: 'vm',\n            reloadOnSearch: false\n        })\n        .when('/artisan/:id/recap', {\n            templateUrl: \"Pages/ListeArtisan/contactArtisan.html\",\n            controller: \"ContactArtisanController\",\n            controllerAs: 'vm',\n        })\n        .when('/artisan/list', {\n            templateUrl: \"Pages/ListeArtisan/listeArtisan.html\",\n            controller: \"ListeArtisanController\",\n            controllerAs: 'vm',\n        })\n        .when('/artisan/list/:fltr', {\n            templateUrl: \"Pages/ListeArtisan/listeArtisan.html\",\n            controller: \"ListeArtisanController\",\n            controllerAs: \"vm\",\n        })\n        .when('/artisan', {\n            redirectTo: function() {\n                return '/artisan/' + Date.now();\n            }\n        })\n        .when('/artisan/:id', {\n            templateUrl: \"Pages/Artisan/artisan.html\",\n            controller: \"ArtisanController\",\n            controllerAs: \"vm\",\n            resolve: {\n                artisanPrm: getArtisan,\n            }\n        })\n        .when('/dashboard', {\n            controller: 'DashboardController',\n            templateUrl: \"Pages/Dashboard/dashboard.html\",\n        })\n        .when('/search/:query', {\n            templateUrl: \"Pages/Search/search.html\",\n            controller: \"SearchController\",\n            controllerAs: \"vm\",\n        })\n        .when('/compta/lpa', {\n            templateUrl: \"Pages/LPA/LPA.html\",\n            controller: \"LpaController\",\n            controllerAs: \"vm\",\n        })\n        .when('/compta/avoirs', {\n            templateUrl: \"Pages/Avoirs/avoirs.html\",\n            controller: \"avoirsController\",\n            controllerAs: \"vm\",\n        })\n        .when('/compta/archivesPaiement', {\n            templateUrl: \"Pages/Archives/archives.html\",\n            controller: \"archivesPaiementController\",\n            controllerAs: \"vm\",\n        })\n        .when('/compta/archivesReglement', {\n            templateUrl: \"Pages/Archives/archives.html\",\n            controller: \"archivesReglementController\",\n            controllerAs: \"vm\",\n        })\n        .otherwise({\n            redirectTo: '/dashboard'\n        });\n    // use the HTML5 History API\n    $locationProvider.html5Mode(true);\n});\n\nangular.module('edison').run(function(editableOptions) {\n    \"use strict\";\n\n    editableOptions.theme = 'bs3'; // bootstrap3 theme. Can be also 'bs2', 'default'\n}).run(function($templateCache, $route, $http) {\n    var url;\n    for (var i in $route.routes) {\n        if (url = $route.routes[i].templateUrl) {\n            $http.get(url, {\n                cache: $templateCache\n            });\n        }\n    }\n    $http.get(\"/Directives/dropdown-row.html\", {\n        cache: $templateCache\n    });\n\n    $http.get(\"/Templates/artisan-categorie.html\", {\n        cache: $templateCache\n    });\n    $http.get(\"/Templates/info-client.html\", {\n        cache: $templateCache\n    });\n    $http.get(\"/Templates/info-categorie.html\", {\n        cache: $templateCache\n    });\n    $http.get(\"/Templates/autocomplete-map.html\", {\n        cache: $templateCache\n    });\n})\nangular.module('edison').config(function($compileProvider) {\n    $compileProvider.aHrefSanitizationWhitelist(/^\\s*(https?|callto|mailto|file|tel):/);\n});\n","angular.module('edison').directive('allowPattern', [allowPatternDirective]);\n\nfunction allowPatternDirective() {\n    return {\n        restrict: \"A\",\n        compile: function(tElement, tAttrs) {\n            return function(scope, element, attrs) {\n                // I handle key events\n                element.bind(\"keypress\", function(event) {\n                    var keyCode = event.which || event.keyCode; // I safely get the keyCode pressed from the event.\n                    var keyCodeChar = String.fromCharCode(keyCode); // I determine the char from the keyCode.\n\n                    // If the keyCode char does not match the allowed Regex Pattern, then don't allow the input into the field.\n                    if (!keyCodeChar.match(new RegExp(attrs.allowPattern, \"i\"))) {\n                        event.preventDefault();\n                        return false;\n                    }\n\n                });\n            };\n        }\n    };\n}\n","angular.module('edison').directive('capitalize', function() {\n    \"use strict\";\n    return {\n        require: 'ngModel',\n        link: function(scope, element, attrs, modelCtrl) {\n            modelCtrl.$parsers.push(function(input) {\n                return typeof input === \"string\" ? input.toUpperCase() : \"\";\n            });\n            element.css(\"text-transform\", \"uppercase\");\n        }\n    };\n});\n","","angular.module('edison').directive('creditcard', function() {\n    \"use strict\";\n    return {\n        require: 'ngModel',\n        scope: {\n            inline: \"=\",\n        },\n        link: function(scope, element, attrs, modelCtrl) {\n            modelCtrl.$parsers.push(function(input) {\n                return input.replace('x', 'AAA')\n            });\n        }\n    };\n});\n","angular.module('edison').directive('dropdownRow', function(Devis, productsList, edisonAPI, config, $q, $timeout, Intervention) {\n    \"use strict\";\n\n    return {\n        restrict: 'E',\n        replace: true,\n        templateUrl: '/Directives/dropdown-row.html',\n        scope: {\n            model: \"@\",\n            row: '=',\n        },\n        link: function(scope, element, attrs) {\n            scope._ = _;\n            scope.Intervention = Intervention\n            scope.Devis = Devis\n            scope._model = scope.model || \"intervention\"\n\n            scope.expendedStyle = {\n                height: 0,\n                overflow: 'hidden'\n            };\n            scope.expendedReady = false;\n            scope.data = {};\n            scope.config = config\n            $timeout(function() {\n                $(\"#expended\").velocity({\n                    height: 220,\n                }, 50);\n            }, 50)\n\n            if (scope._model === \"intervention\") {\n                edisonAPI.intervention.get(scope.row.id, {\n                    populate: ['sst', 'devisOrigine'].join(',')\n                }).then(function(result) {\n                    scope.data = result.data;\n                    if (scope.data.produits) {\n                        scope.produits = new productsList(scope.data.produits);\n                    }\n                    scope.client = scope.data.client;\n                    scope.address = scope.client.address;\n\n                })\n\n            } else if (scope._model === \"devis\") {\n                var pAll = [\n                    edisonAPI.devis.get(scope.row.id, {\n                        populate: 'transfertId'\n                    }),\n                ]\n                var pThen = function(result) {\n                    scope.data = result[0].data;\n                    scope.produits = new productsList(scope.data.produits);\n                    scope.hist = scope.data.historique\n                    scope.client = scope.data.client;\n                    scope.address = scope.client.address;\n                }\n            } else if (scope._model === 'artisan') {\n                pAll = [\n                    edisonAPI.artisan.get(scope.row.id),\n                    edisonAPI.artisan.getStats(scope.row.id)\n                ]\n                pThen = function(result) {\n                    scope.data = result[0].data;\n                    scope.artisan = scope.data;\n                    scope.artisan.stats = result[1].data;\n                    scope.address = scope.artisan.address\n                }\n            }\n\n            $q.all(pAll).then(pThen)\n            scope.getStaticMap = function() {\n                var q = \"?format=jpg&width=411&height=210px&precision=0&origin=\" + scope.address.lt + \", \" + scope.address.lg;\n                if (_.get(scope, 'data.artisan.address.lt'))\n                    q += \"&destination=\" + scope.data.artisan.address.lt + \", \" + scope.data.artisan.address.lg;\n                else\n                    q += \"&zoom=15\";\n                return \"/api/mapGetStatic\" + q;\n            }\n\n        }\n    };\n});\n","angular.module('edison').directive('ngEnter', function () {\n    \"use strict\";\n    return function (scope, element, attrs) {\n        element.bind(\"keydown keypress\", function (event) {\n            if(event.which === 13) {\n                scope.$apply(function (){\n                    scope.$eval(attrs.ngEnter);\n                });\n\n                event.preventDefault();\n            }\n        });\n    };\n});"," angular.module('edison').directive('lineupIntervention', function(tabContainer, FiltersFactory, ContextMenu, LxProgressService, edisonAPI, DataProvider, $routeParams, $location, $rootScope, $filter, config, ngTableParams) {\n     \"use strict\";\n     return {\n         replace: false,\n         restrict: 'E',\n         templateUrl: '/Templates/lineup-intervention.html',\n         scope: {\n             filter: '=',\n         },\n         controller: function($scope) {\n             LxProgressService.circular.show('#5fa2db', '#globalProgress');\n             var currentFilter;\n             var currentHash = $location.hash();\n             var dataProvider = new DataProvider('intervention', $routeParams.hashModel);\n             var filtersFactory = new FiltersFactory('intervention')\n             if ($routeParams.fltr) {\n                 currentFilter = filtersFactory.getFilterByUrl($routeParams.fltr)\n             }\n             $scope.tab = tabContainer.getCurrentTab();\n             $scope.tab.hash = currentHash;\n             $scope.config = config;\n             var title = currentFilter ? currentFilter.long_name : \"Interventions\";\n             if ($routeParams.id) {\n                 var id = parseInt($routeParams.id)\n                 $scope.customFilter = function(inter) {\n                     return inter.ai === id;\n                 }\n             } else {\n                 $scope.tab.setTitle(title, currentHash);\n             }\n             dataProvider.init(function(err, resp) {\n\n                 dataProvider.applyFilter(currentFilter, $scope.tab.hash, $scope.customFilter);\n                 var tableParameters = {\n                     page: 1,\n                     total: dataProvider.filteredData.length,\n                     filter: {},\n                     sorting: {\n                         id: 'desc'\n                     },\n                     count: 100\n                 };\n                 var tableSettings = {\n                     total: dataProvider.filteredData,\n                     getData: function($defer, params) {\n                         var data = dataProvider.filteredData;\n                         data = $filter('tableFilter')(data, params.filter());\n                         $scope.currentFilter = _.clone(params.filter());\n                         params.total(data.length);\n                         data = $filter('orderBy')(data, params.orderBy());\n                         $defer.resolve(data.slice((params.page() - 1) * params.count(), params.page() * params.count()));\n                     },\n                     filterDelay: 100\n                 }\n                 $scope.tableParams = new ngTableParams(tableParameters, tableSettings);\n                 LxProgressService.circular.hide()\n             })\n\n             var lastChange = 0;\n             $rootScope.$on('INTERVENTION_CACHE_LIST_CHANGE', function(event, newData) {\n                 if (tabContainer.getCurrentTab() && $scope.tab.fullUrl === tabContainer.getCurrentTab().fullUrl && newData._date > lastChange) {\n                     dataProvider.applyFilter(currentFilter, $scope.tab.hash, $scope.customFilter);\n                     $scope.tableParams.reload();\n                     // $scope.tableParams.orderBy($scope.tableParams.$params.sorting)\n                     // $scope.tableParams.filter($scope.tableParams.$params.filter)\n                 }\n                 lastChange = newData._date;\n             })\n\n\n\n\n             $scope.contextMenu = new ContextMenu('intervention')\n\n\n             $scope.rowRightClick = function($event, inter) {\n                 edisonAPI.intervention.get(inter.id, {\n                         populate: 'sst'\n                     })\n                     .then(function(resp) {\n                         $scope.contextMenu.setData(resp.data);\n                         $scope.contextMenu.setPosition($event.pageX - ($routeParams.id ? 50 : 0), $event.pageY + ($routeParams.id ? 0 : 200))\n                         $scope.contextMenu.open();\n                     })\n             }\n\n             $scope.rowClick = function($event, inter) {\n                 if ($scope.contextMenu.active)\n                     return $scope.contextMenu.close();\n                 if ($event.metaKey || $event.ctrlKey) {\n                     tabContainer.addTab('/intervention/' + inter.id, {\n                         title: ('#' + inter.id),\n                         setFocus: false,\n                         allowDuplicates: false\n                     });\n                 } else {\n                     if ($scope.expendedRow === inter.id) {\n                         $scope.expendedRow = undefined;\n                     } else {\n                         $scope.expendedRow = inter.id\n                     }\n                 }\n             }\n         }\n     }\n });\n","angular.module('edison').directive('ngRightClick', function($parse) {\n    \"use strict\";\n    return function(scope, element, attrs) {\n        var fn = $parse(attrs.ngRightClick);\n        element.bind('contextmenu', function(event) {\n            scope.$apply(function() {\n                event.preventDefault();\n                fn(scope, {\n                    $event: event\n                });\n            });\n        });\n    };\n});\n"," angular.module('edison').directive('link', ['FiltersFactory', '$rootScope', function(FiltersFactory, $rootScope) {\n     \"use strict\";\n     return {\n         restrict: 'AE',\n         replace: true,\n         template: '<li>' +\n             '      <a href=\"{{fullUrl}}\" >' +\n             '            <i ng-if=\"icon\" class = \"menu-icon fa fa-{{icon}}\"> </i>' +\n             '            <span ng-class=\"{bold : bold, textWhite: textWhite}\" class=\"mm-text\">{{title || exFltr.long_name}}</span>' +\n             '            <span ng-if=\"total\"class=\"label label-{{_color}}\">{{total}}</span>' +\n             '        </a>' +\n             '      </li>',\n         scope: {\n             fltr: '@',\n             login: '@',\n             today: '@',\n             icon: '@',\n             title: '@',\n             url: '@',\n             textWhite:'@',\n             model: '@',\n             bold: '@',\n             count: '@',\n             noCounter: '@',\n             color: '@',\n             hashModel: '@'\n         },\n         link: function(scope, element, attrs) {\n             var findTotal = function() {\n                 if (scope.noCounter)\n                     return undefined;\n                 var total = 0;\n                 if (scope.login) {\n                     var t = _.find($rootScope.interventionsStats, function(e) {\n                         return e.login === scope.login;\n                     })\n                     total += _.get(t, scope.fltr + '.total', 0);\n                 } else {\n                     _.each($rootScope.interventionsStats, function(t) {\n                         total += _.get(t, scope.fltr + '.total', 0);\n                     })\n                 }\n                 return total;\n             }\n             $rootScope.$watch('interventionsStats', function() {\n                 scope.total = findTotal();\n             })\n             scope._color = (scope.color || 'success')\n             scope._model = scope.model || 'intervention';\n             var filtersFactory = new FiltersFactory(scope._model);\n             scope.exFltr = filtersFactory.getFilterByName(scope.fltr);\n             scope.total = findTotal();\n             scope._url = scope.exFltr.url.length ? \"/\" + scope.exFltr.url : scope.exFltr.url;\n             scope._login = scope.login ? (\"#\" + scope.login) : '';\n             scope._hashModel = scope.hashModel ? (\"?hashModel=\" + scope.hashModel) : '';\n             scope.fullUrl = scope.url ||Â ('/' + scope._model + '/list' + scope._url + scope._hashModel + scope._login)\n         }\n     };\n }]);\n\n angular.module('edison').directive('simpleLink', ['FiltersFactory', '$rootScope', function(FiltersFactory, $rootScope) {\n     \"use strict\";\n     return {\n         restrict: 'AE',\n         replace: true,\n         template: '<li>' +\n             '      <a href=\"{{url}}\" >' +\n             '            <i ng-if=\"icon\" class = \"menu-icon fa fa-{{icon}}\"> </i>' +\n             '            <span class=\"mm-text\">{{title}}</span>' +\n             '        </a>' +\n             '      </li>',\n         scope: {\n             icon: '@',\n             title: '@',\n             url: '@',\n         },\n         link: function(scope, element, attrs) {\n         }\n     };\n }]);\n\n\n angular.module('edison').directive('linkSeparator', [function() {\n     \"use strict\";\n     return {\n         restrict: 'AE',\n         replace: true,\n         template: '<li>' +\n             '      <a>' +\n             '            <i ng-if=\"icon\" class = \"menu-icon fa fa-{{icon}}\"> </i>' +\n             '            <strong><span class=\"mm-text\">{{title}}</span></strong>' +\n             '        </a>' +\n             '      </li>',\n         scope: {\n             icon: '@',\n             title: '@',\n         },\n         link: function(scope, element, attrs) {\n\n         }\n     };\n }]);\n\n\n angular.module('edison').service('sidebarSM', function() {\n\n     var C = function() {\n         this.display = false;\n     };\n     C.prototype.set = function(name, value) {\n         this[name] = value;\n     }\n     return new C();\n\n });\n\n angular.module('edison').directive('sideBar', ['sidebarSM', function(sidebarSM) {\n     \"use strict\";\n     return {\n         replace: true,\n         restrict: 'E',\n         templateUrl: '/Directives/side-bar.html',\n         transclude: true,\n         scope: {},\n         link: function(scope, element, attrs) {\n             scope.sidebarSM = sidebarSM;\n         }\n     }\n }]);\n\n angular.module('edison').directive('dropDown', ['config', 'sidebarSM', '$timeout', function(config, sidebarSM, $timeout) {\n     \"use strict\";\n\n\n     return {\n         replace: true,\n         restrict: 'E',\n         templateUrl: '/Directives/dropdown.html',\n         transclude: true,\n         scope: {\n             title: '@',\n             icon: '@',\n             isOpen: '@',\n             openDefault: '&'\n         },\n         link: function(scope, element, attrs) {\n             scope.openDefault = scope.$eval(scope.openDefault)\n             scope.isopen = scope.openDefault\n             scope.toggleSidebar = function($event, $elem) {\n                 var $ul = $(element).find('>ul')\n                 if ($('#main-menu').width() > 200) {\n                     if (scope.isopen) {\n                         $ul.velocity({\n                             height: 0\n                         }, 200, function() {\n                             scope.$apply(function() {\n                                 scope.isopen = false;\n                             })\n                         });\n                     } else {\n                         $ul.css('height', '100%')\n                         scope.isopen = true\n                     }\n                 } else {\n\n                     $('#mmc-ul > .mmc-wrapper').html($ul.find('> *'));\n                     sidebarSM.set(\"display\", true);\n                     $timeout(function checkHover() {\n                         if (!$('#mmc-ul').is(\":hover\")) {\n                             sidebarSM.set(\"display\", false);\n                             $ul.html($('#mmc-ul > .mmc-wrapper').find(\">*\"))\n                             $('#mmc-ul > .mmc-wrapper').html('');\n                         } else {\n                             $timeout(checkHover, 1000);\n                         }\n                     }, 1000)\n                 }\n             }\n         }\n     };\n }]);\n","angular.module(\"edison\").filter('contactFilter', ['config', function(config) {\n    \"use strict\";\n\n    var clean = function(str) {\n        return _.deburr(str).toLowerCase();\n    }\n\n    var compare = function(a, b, strictMode) {\n        if (typeof a === \"string\") {\n            return clean(a).includes(b);\n        } else if (!strictMode) {\n            return clean(String(a)).startsWith(b);\n        } else {\n            return a === parseInt(b);\n        }\n    }\n    return function(dataContainer, input) {\n        var rtn = [];\n        input = clean(input);\n        _.each(dataContainer, function(data) {\n            if (!data.stringify)\n                data.stringify = clean(JSON.stringify(data))\n            if (!input || data.stringify.indexOf(input) >= 0) {\n                rtn.push(data);\n            } else {\n            }\n        })\n        return rtn;\n    }\n}]);\n","angular.module('edison').filter('crlf', function() {\n\t\"use strict\";\n    return function(text) {\n        return text.split(/\\n/g).join('<br>');\n    };\n});\n","angular.module('edison').filter('loginify', function() {\n    \"use strict\";\n    return function(obj) {\n        if (!obj)\n            return \"\";\n        return obj.slice(0, 1).toUpperCase() + obj.slice(1, -2)\n    };\n});\n","angular.module('edison').filter('relativeDate', function() {\n    \"use strict\";\n    return function(date, no) {\n        return moment((date + 1370000000) * 1000).fromNow(no).toString()\n    };\n});\n","angular.module('edison').filter('reverse', function() {\n    \"use strict\";\n    return function(items) {\n        if (!items)\n            return [];\n        return items.slice().reverse();\n    };\n});\n","angular.module(\"edison\").filter('tableFilter', ['config', function(config) {\n    \"use strict\";\n\n    var clean = function(str) {\n        return _.deburr(str).toLowerCase();\n    }\n\n    var compare = function(a, b, strictMode) {\n        if (typeof a === \"string\") {\n            return clean(a).includes(b);\n        } else if (!strictMode){\n            return clean(String(a)).startsWith(b);\n        } else {\n            return a === parseInt(b);\n        }\n    }\n    var compareCustom = function(key, data, input) {\n        if (key === '_categorie') {\n            var cell = config.categoriesHash()[data.c].long_name;\n            return compare(cell, input);\n        }\n        if (key === '_etat') {\n            var cell = config.etatsHash()[data.s].long_name\n            return compare(cell, input);\n        }\n        return true;\n    }\n\n    return function(dataContainer, inputs, strictMode) {\n        var rtn = [];\n        console.time('fltr')\n        inputs = _.mapValues(inputs, clean);\n        _.each(dataContainer, function(data) {\n            if (data.id) {\n                var psh = true;\n                _.each(inputs, function(input, k) {\n                    if (input && input.length > 0) {\n                        if (k.charAt(0) === '_') {\n                            if (!compareCustom(k, data, input)) {\n                                psh = false;\n                                return false\n                            }\n                        } else {\n                            if (!compare(data[k], input, strictMode)) {\n                                psh = false;\n                                return false\n                            }\n                        }\n                    }\n                });\n                if (psh === true) {\n                    rtn.push(data);\n                }\n            }\n        })\n        console.timeEnd('fltr')\n\n        return rtn;\n    }\n}]);\n"," angular.module('edison').directive('infoFacture', ['config', 'mapAutocomplete',\n     function(config, mapAutocomplete) {\n         \"use strict\";\n         return {\n             restrict: 'E',\n             templateUrl: '/Templates/info-facture.html',\n             scope: {\n                 data: \"=\",\n             },\n             link: function(scope, element, attrs) {\n                 var model = scope.data;\n                 scope.config = config\n                 scope.autocomplete = mapAutocomplete;\n                 scope.changeAddressFacture = function(place) {\n                     mapAutocomplete.getPlaceAddress(place).then(function(addr) {\n                         scope.data.facture = scope.data.facture || Â {}\n                         scope.data.facture.address = addr;\n                     });\n                 }\n                 scope.changeGrandCompte = function() {\n                     // var x = _.clone(config.compteFacturation[scope.data.facture.compte])\n                     scope.data.facture = _.find(config.compteFacturation, {\n                         short_name: scope.data.facture.compte\n                     });\n                     scope.data.facture.payeur = \"GRN\";\n                 }\n             },\n         }\n\n     }\n ]);\n","angular.module('edison').directive('infoFourniture', ['config', 'fourniture',\n    function(config, fourniture) {\n        \"use strict\";\n        return {\n            restrict: 'E',\n            templateUrl: '/Templates/info-fourniture.html',\n            scope: {\n                data: \"=\",\n                display: \"=\",\n                small:\"=\"\n            },\n            link: function(scope, element, attrs) {\n                scope.config = config\n                scope.dsp = scope.display || false\n                scope.data.fourniture = scope.data.fourniture || [];\n                scope.fourniture = fourniture.init(scope.data.fourniture);\n            },\n        }\n\n    }\n]);\n","angular.module('edison').directive('listeIntervention', function(tabContainer, FiltersFactory, ContextMenu, LxProgressService, edisonAPI, DataProvider, $routeParams, $location, $rootScope, $filter, config, ngTableParams) {\n    \"use strict\";\n    return {\n        restrict: 'E',\n        templateUrl: '/Templates/listeIntervention.html',\n        scope: {\n            id: \"=\",\n            //display: \"=\"\n        },\n        link: function(scope, element, attrs) {\n            var currentFilter;\n            var currentHash = undefined;\n            var dataProvider = new DataProvider('intervention');\n            var filtersFactory = new FiltersFactory('intervention')\n\n            var title = currentFilter ? currentFilter.long_name : \"Interventions\";\n            scope.recap = $routeParams.sstID ? parseInt($routeParams.sstID) : false;\n\n            dataProvider.init(function(err, resp) {\n                scope.config = config;\n                scope.customFilter = function(inter) {\n                    return inter.ai === scope.id;\n                }\n                dataProvider.applyFilter(currentFilter, undefined, scope.customFilter);\n                var tableParameters = {\n                    page: 1, // show first page\n                    total: dataProvider.filteredData.length,\n                    filter: {},\n                    sorting: {\n                        id: 'desc'\n                    },\n                    count: 100 // count per page\n                };\n\n\n                var tableSettings = {\n                    //groupBy:$rootScope.config.selectedGrouping,\n                    total: dataProvider.filteredData,\n                    getData: function($defer, params) {\n                        var data = dataProvider.filteredData;\n                        if (!_.isEqual(params.filter(), scope.currentFilter))\n                            data = $filter('tableFilter')(data, params.filter());\n                        scope.currentFilter = _.clone(params.filter());\n                        params.total(data.length);\n                        data = $filter('orderBy')(data, params.orderBy());\n                        $defer.resolve(data.slice((params.page() - 1) * params.count(), params.page() * params.count()));\n                    },\n                    filterDelay: 100\n                }\n                scope.tableParams = new ngTableParams(tableParameters, tableSettings);\n            })\n            var lastChange = 0;\n\n            $rootScope.$on('INTERVENTION_CACHE_LIST_CHANGE', function(event, newData) {\n                if (scope.tab && scope.tab.fullUrl === tabContainer.getCurrentTab().fullUrl && newData._date > lastChange) {\n                    dataProvider.applyFilter(currentFilter, scope.tab.hash, scope.customFilter);\n                    scope.tableParams.reload();\n                    // _this.tableParams.orderBy(_this.tableParams.$params.sorting)\n                    // _this.tableParams.filter(_this.tableParams.$params.filter)\n                }\n                lastChange = newData._date;\n            })\n\n\n            scope.contextMenu = new ContextMenu('intervention')\n\n\n            scope.rowRightClick = function($event, inter) {\n                edisonAPI.intervention.get(inter.id, {\n                        extend: true\n                    })\n                    .then(function(resp) {\n                        scope.contextMenu.setData(resp.data);\n                        scope.contextMenu.setPosition($event.pageX - 40, $event.pageY)\n                        scope.contextMenu.open();\n                    })\n            }\n            scope.rowClick = function($event, inter) {\n                if (scope.contextMenu.active)\n                    return scope.contextMenu.close();\n                if ($event.metaKey || $event.ctrlKey) {\n                    tabContainer.addTab('/intervention/' + inter.id, {\n                        title: ('#' + inter.id),\n                        setFocus: false,\n                        allowDuplicates: false\n                    });\n                } else {\n                    if (scope.expendedRow === inter.id) {\n                        scope.expendedRow = undefined;\n                    } else {\n                        scope.expendedRow = inter.id\n                    }\n                }\n            }\n            scope.$watch('id', function(current, prev) {\n                if (current && current !== prev) {\n                    scope.customFilter = function(inter) {\n                        return inter.ai === current;\n                    }\n                    dataProvider.applyFilter(currentFilter, undefined, scope.customFilter);\n                    if (scope.tableParams)\n                        scope.tableParams.reload();\n\n                }\n            })\n\n        }\n    }\n\n});\n","angular.module('edison').factory('Signalement', function() {\n    \"use strict\";\n\n    var Signalement = function(inter) {\n        this.intervention = inter;\n    }\n\n    Signalement.prototype.list = {\n        intervention: [{\n            name: 'IndisponibilitÃ©',\n            id: 'INDISPO',\n            fn: function() {\n                console.log('yay')\n            }\n        }],\n        partenariat: [{\n            name: 'Facturier / Deviseur',\n            id: 'FACT_DEV',\n            fn: function() {\n                console.log('FACTDEV')\n            }\n        }, {\n            name: 'Erreur SST',\n            id: 'ERREUR',\n            fn: function() {\n                console.log('ERR')\n            }\n            // N'A PAS COMPTÃ LA TVA\n            // \n        }, {\n            name: 'Plainte SST',\n            id: 'PLAINTE',\n            fn: function() {\n                console.log('PLAINTE')\n            }\n        }],\n        compta: [{\n            name: 'RÃ©gulation',\n            id: 'REGULATION',\n            fn: function() {\n                console.log('REGULATION')\n            }\n        }]\n    }\n    return Signalement;\n});\n","angular.module('edison').factory('TabContainer', function($location, $window, $q, edisonAPI) {\n    \"use strict\";\n\n\n    var Tab = function(url, title, hash) {\n\n        this.url = url;\n        this.hash = hash;\n        this.title = title;\n    }\n\n    Tab.setTitle = function(title) {\n        this.title = title;\n    }\n\n\n    var TabContainer = function() {\n        if (!(this instanceof TabContainer)) {\n            return new TabContainer();\n        }\n    }\n\n    TabContainer.prototype.init = function() {\n        this.add($location.path(), \"...\", $location.path(), $location.hash())\n    }\n\n    TabContainer.prototype.selectedIndex = 0;\n    \n    TabContainer.prototype.add = function(url, title, hash) {\n        var tab = new Tab(url, title, hash);\n        this.tabs.push(tab);\n        console.log(tab)\n    }\n\n\n    TabContainer.prototype.tabs = [];\n\n    TabContainer.prototype.getTab = function(tab) {\n        _.each(this.tabs, function(e) {\n            console.log(e, tab)\n        })\n    }\n    TabContainer.prototype.getCurrentTab = function() {\n        return this.getTab(this.tab[this.selectedIndex])\n    }\n\n    TabContainer.prototype.open = function(url, hash) {\n        var _this = this;\n    }\n\n    return TabContainer\n\n});\n","angular.module('edison').factory('Address', function() {\n    \"use strict\";\n\n    var Address = function(place, copyContructor) {\n        if (place.lat && place.lng) {\n            this.lt = place.lat;\n            this.lg = place.lng;\n        } else if (copyContructor) {\n            this.getAddressProprieties(place);\n            this.streetAddress = true;\n        } else if (this.isStreetAddress(place)) {\n            this.getPlaceProprieties(place);\n        } else if (this.isLocalityAddress(place)) {\n            this.getPlaceLocalityProprieties(place);\n        }\n        if (place.geometry) {\n            this.lt = place.geometry.location.lat();\n            this.lg = place.geometry.location.lng();\n        }\n        this.latLng = this.lt + ', ' + this.lg;\n    };\n\n    Address.prototype.getPlaceLocalityProprieties = function(place) {\n        var a = place.address_components;\n        this.cp = a[1] && a[1].short_name;\n        this.v = a[0] && a[0].short_name;\n    }\n\n    Address.prototype.getPlaceProprieties = function(place) {\n        var a = place.address_components;\n        this.n = a[0] && a[0].short_name;\n        this.r = a[1] && a[1].short_name;\n        this.cp = a[6] && a[6].short_name;\n        this.v = a[2] && a[2].short_name;\n    }\n\n    Address.prototype.getAddressProprieties = function(address) { \n        this.n = address.n;\n        this.r = address.r;\n        this.cp = address.cp;\n        this.v = address.v;\n        this.lt = address.lt;\n        this.lg = address.lg;\n        this.code = address.code;\n        this.etage = address.etage;\n        this.batiment = address.batiment;\n    }\n\n    Address.prototype.isLocalityAddress = function(place) {\n        this.localityAddress = (place.types.indexOf(\"locality\") >= 0);\n        return this.localityAddress;\n    }\n\n    Address.prototype.isStreetAddress = function(place) {\n        var noStreet = [\"locality\", \"country\", \"postal_code\", \"route\", \"sublocality\"];\n        this.streetAddress = (noStreet.indexOf(place.types[0]) < 0);\n        return (this.streetAddress);\n    }\n\n    Address.prototype.toString = function() {\n        return (this.n + \" \" + this.r + \" \" + this.cp + \", \" + this.v + \", France\")\n    }\n\n    return (function(place, copyContructor) {\n        return new Address(place, copyContructor);\n    })\n});\n","angular.module('edison').factory('edisonAPI', ['$http', '$location', 'Upload', function($http, $location, Upload) {\n    \"use strict\";\n    return {\n        searchProduct: function(text) {\n            return $http({\n                method: 'GET',\n                url: '/api/products/search',\n                cache: true,\n                params: {\n                    q: text\n                }\n            })\n        },\n        stats: {\n            telepro: function() {\n                return $http.get('/api/stats/telepro');\n            }\n        },\n        compta: {\n            lpa: function() {\n                return $http({\n                    method: 'GET',\n                    cache: false,\n                    url: '/api/intervention/lpa',\n                }).success(function(result) {\n                    return result;\n                });\n            },\n            flush: function(data) {\n                return $http.post('/api/intervention/flush', data);\n            },\n            archivesPaiement: function() {\n                return $http.get('/api/intervention/archivePaiement');\n            },\n            archivesReglement: function() {\n                return $http.get('/api/intervention/archiveReglement');\n            },\n            avoirs: function() {\n                return $http.get('/api/intervention/avoirs')\n            },\n            flushAvoirs: function(data) {\n                return $http.post('/api/intervention/flushAvoirs', data);\n            },\n\n        },\n        devis: {\n            saveTmp: function(data) {\n                return $http.post('/api/devis/temporarySaving', data);\n            },\n            getTmp: function(id) {\n                return $http.get('/api/devis/temporarySaving?id=' + id);\n            },\n            get: function(id, options) {\n                return $http({\n                    method: 'GET',\n                    cache: false,\n                    url: '/api/devis/' + id,\n                    params: options || {}\n                }).success(function(result) {\n                    return result;\n                });\n            },\n            save: function(params) {\n                return $http.post(\"/api/devis\", params);\n            },\n            envoi: function(id, options) {\n                return $http.post(\"/api/devis/\" + id + \"/envoi\", options);\n            },\n            annulation: function(id, causeAnnulation) {\n                return $http.post(\"/api/devis/\" + id + \"/annulation\", {\n                    causeAnnulation: causeAnnulation\n                });\n            },\n            list: function() {\n                return $http.get('api/devis/getCacheList')\n            },\n        },\n        intervention: {\n            saveTmp: function(data) {\n                return $http.post('/api/intervention/temporarySaving', data);\n            },\n            getTmp: function(id) {\n                return $http.get('/api/intervention/temporarySaving?id=' + id);\n            },\n            demarcher: function(id) {\n                return $http({\n                    method: 'POST',\n                    url: '/api/intervention/' + id + '/demarcher'\n                })\n            },\n            reactivation:function(id) {\n                return $http.post('api/intervention/' + id + '/reactivation')\n            },\n            list: function() {\n                return $http.get('api/intervention/getCacheList')\n            },\n            get: function(id, options) {\n                return $http({\n                    method: 'GET',\n                    cache: false,\n                    url: '/api/intervention/' + id,\n                    params: options || {}\n                }).success(function(result) {\n                    return result;\n                });\n            },\n            getCB: function(id) {\n                return $http.get(\"/api/intervention/\" + id + \"/CB\");\n            },\n            save: function(params) {\n                if (!params.id) {\n                    return $http.post(\"/api/intervention\", params)\n                } else {\n                    return $http.post(\"/api/intervention/\" + params.id, params)\n\n                }\n            },\n            getFiles: function(id) {\n                return $http({\n                    method: 'GET',\n                    url: \"/api/intervention/\" + id + \"/getFiles\"\n                });\n            },\n            verification: function(id, options) {\n                return $http.post(\"/api/intervention/\" + id + \"/verification\", options);\n            },\n            annulation: function(id, causeAnnulation) {\n                return $http.post(\"/api/intervention/\" + id + \"/annulation\", {\n                    causeAnnulation: causeAnnulation\n                });\n            },\n            envoi: function(id, options) {\n                return $http.post(\"/api/intervention/\" + id + \"/envoi\", options);\n            },\n            sendFacture: function(id, options) {\n                return $http.post(\"/api/intervention/\" + id + \"/sendFacture\", options);\n            }\n        },\n        artisan: {\n            getCompteTiers: function(id_sst) {\n                return $http.get(['/api/artisan', id_sst, 'compteTiers'].join('/'));\n            },\n            envoiContrat: function(id, options) {\n                return $http.post(\"/api/artisan/\" + id + '/sendContrat', options)\n            },\n            upload: function(file, name, id) {\n                return Upload.upload({\n                    url: '/api/artisan/' + id + \"/upload\",\n                    fields: {\n                        name: name,\n                        id: id\n                    },\n                    file: file\n                })\n            },\n            reaStats: function() {\n                return $http.get('/api/artisan/reaStats')\n            },\n            extendedStats: function(id) {\n                return $http.get('/api/artisan/' + id + \"/extendedStats\")\n            },\n            save: function(params) {\n                return $http.post(\"/api/artisan\", params);\n            },\n            list: function(options) {\n                return $http({\n                    method: 'GET',\n                    cache: options && options.cache,\n                    url: '/api/artisan/list'\n                }).success(function(result) {\n                    return result;\n                })\n            },\n            lastInters: function(id) {\n                return $http({\n                    method: 'GET',\n                    url: '/api/artisan/' + id + '/lastInters',\n                })\n            },\n            get: function(id, options) {\n                return $http({\n                    method: 'GET',\n                    cache: false,\n                    url: '/api/artisan/' + id,\n                    params: options || {}\n                }).success(function(result) {\n                    return result;\n                });\n            },\n            getNearest: function(address, categorie) {\n                return $http({\n                    method: 'GET',\n                    url: \"/api/artisan/rank\",\n                    cache: false,\n                    params: {\n                        categorie: categorie,\n                        lat: address.lt,\n                        lng: address.lg,\n                        limit: 50,\n                        maxDistance: 100\n                    }\n                });\n            },\n            getStats: function(id_sst) {\n                return $http({\n                    method: 'GET',\n                    url: \"/api/artisan/\" + id_sst + \"/stats\"\n                });\n            },\n            setAbsence: function(id, options) {\n                return $http({\n                    method: 'POST',\n                    url: '/api/artisan/' + id + '/absence',\n                    params: options\n                })\n            },\n        },\n        task: {\n            get: function(params) {\n                return $http({\n                    method: 'GET',\n                    url: '/api/taks/get',\n                    params: params\n                })\n            },\n            add: function(params) {\n                return $http({\n                    method: 'GET',\n                    url: '/api/task/add',\n                    params: params\n                })\n            },\n            check: function(params) {\n                return $http({\n                    method: 'GET',\n                    url: '/api/task/add',\n                    params: params\n                })\n            },\n        },\n        file: {\n            upload: function(file, options) {\n                return Upload.upload({\n                    url: '/api/document/upload',\n                    fields: options,\n                    file: file\n                })\n            },\n        },\n        call: {\n            get: function(origin, link) {\n                return $http({\n                    method: 'GET',\n                    url: '/api/calls/get',\n                    params: {\n                        q: JSON.stringify({\n                            link: link\n                        })\n                    }\n                })\n            },\n            save: function(params) {\n                return $http.post('/api/calls', params);\n            },\n        },\n        sms: {\n            get: function(origin, link) {\n                return $http({\n                    method: 'GET',\n                    url: '/api/sms/get',\n                    params: {\n                        q: JSON.stringify({\n                            link: link,\n                            origin: origin\n                        })\n                    }\n                })\n            },\n            send: function(params) {\n                return $http.post(\"/api/sms\", params)\n            },\n\n        },\n        getDistance: function(options) {\n            return $http({\n                method: 'GET',\n                cache: true,\n                url: '/api/mapGetDistance',\n                params: options\n            }).success(function(result) {\n                return result;\n            });\n        },\n        request: function(options) {\n            return $http({\n                method: options.method || 'GET',\n                url: '/api/' + options.fn,\n                params: options.data\n            });\n        },\n        searchPhone: function(tel) {\n            return $http({\n                method: 'GET',\n                url: \"api/arcep/\" + tel + \"/search\"\n            });\n        },\n        getUser: function() {\n            return $http({\n                method: 'GET',\n                cache: true,\n                url: \"/api/whoAmI\"\n            });\n        },\n        searchText: function(text, options) {\n            return $http({\n                method: 'GET',\n                params: options,\n                url: ['api', 'search', text].join('/')\n            })\n        }\n    }\n}]);\n","angular.module('edison')\n    .factory('Artisan', ['$window', '$rootScope', '$location', 'LxNotificationService', 'LxProgressService', 'dialog', 'edisonAPI', 'textTemplate',\n        function($window, $rootScope, $location, LxNotificationService, LxProgressService, dialog, edisonAPI, textTemplate) {\n            \"use strict\";\n            var Artisan = function(data) {\n                if (!(this instanceof Artisan)) {\n                    return new Artisan(data);\n                }\n                for (var k in data) {\n                    this[k] = data[k];\n                }\n            }\n            Artisan.prototype.typeOf = function() {\n                return 'Artisan';\n            }\n            Artisan.prototype.ouvrirFiche = function() {\n                $location.url(\"/artisan/\" + this.id);\n            }\n            Artisan.prototype.ouvrirRecap = function() {\n                $location.url(\"/artisan/\" + this.id + '/recap');\n            }\n            Artisan.prototype.facturierDeviseur = function() {\n                dialog.facturierDeviseur(this, function(facturier, deviseur) {\n                    console.log(facturier, deviseur)\n                })\n            }\n            Artisan.prototype.call = function(cb) {\n                var _this = this;\n                var now = Date.now();\n                $window.open('callto:' + _this.telephone.tel1, '_self', false)\n/*                dialog.choiceText({\n                    title: 'Nouvel Appel',\n                    subTitle: _this.telephone.tel1\n                }, function(response, text) {\n                    edisonAPI.call.save({\n                        date: now,\n                        to: _this.telephone.tel1,\n                        link: _this.id,\n                        origin: _this.id || _this.tmpID || 0,\n                        description: text,\n                        response: response\n                    }).success(function(resp) {\n                        if (typeof cb === 'function')\n                            cb(null, resp);\n                    }).catch(function(err) {\n                        if (typeof cb === 'function')\n                            cb(err);\n                    })\n                })*/\n            };\n\n            Artisan.prototype.save = function(cb) {\n                console.log('save')\n                var _this = this;\n\n                edisonAPI.artisan.save(_this)\n                    .then(function(resp) {\n                        LxNotificationService.success(\"Les donnÃ©es ont Ã  Ã©tÃ© enregistrÃ©\");\n                        if (typeof cb === 'function')\n                            cb(null, resp.data)\n                    }).catch(function(error) {\n                        LxNotificationService.error(error.data);\n                        if (typeof cb === 'function')\n                            cb(error.data)\n                    });\n            };\n\n            Artisan.prototype.upload = function(file, name, cb) {\n                var _this = this;\n                if (file) {\n                    LxProgressService.circular.show('#5fa2db', '#fileUploadProgress');\n                    edisonAPI.artisan.upload(file, name, _this.id)\n                        .success(function(resp) {\n                            _this.document = resp.document;\n                            LxProgressService.circular.hide();\n                            if (typeof cb === 'function')\n                                cb(null, resp);\n                        }).catch(function(err) {\n                            LxProgressService.circular.hide();\n                            if (typeof cb === 'function')\n                                cb(err);\n                        })\n                }\n            }\n\n            Artisan.prototype.envoiContrat = function(cb) {\n                var _this = this;\n                dialog.sendContrat({\n                    title: \"Texte envoi devis\",\n                    text: textTemplate.mail.artisan.envoiContrat.bind(_this)($rootScope.user),\n                    width: \"60%\",\n                    height: \"80%\"\n                }, function(options) {\n                    edisonAPI.artisan.envoiContrat(_this.id, {\n                        text: options.text,\n                        signe: options.signe\n                    }).success(function(resp) {\n                        LxNotificationService.success(\"le contrat a Ã©tÃ© envoyÃ©\");\n                        if (typeof cb === 'function')\n                            cb(null, resp);\n                    }).catch(function(err) {\n                        LxNotificationService.error(\"L'envoi du contrat Ã  Ã©chouÃ©\\n\");\n                        if (typeof cb === 'function')\n                            cb(err);\n                    });\n                });\n            }\n\n            Artisan.prototype.ouvrirFiche = function() {\n                $location.url(\"/artisan/\" + this.id);\n            }\n            return Artisan;\n        }\n    ]);\n","angular.module('edison').factory('Compta', function() {\n    \"use strict\";\n\n    var Compta = function(inter) {\n        var _this = this\n        if (!(this instanceof Compta))\n            return new Compta(inter)\n        if (inter) {\n            _this.inter = function() {\n                return inter;\n            }\n            var reglement = inter.compta.reglement\n            var paiement = inter.compta.paiement\n            if (!_.get(inter, 'compta.paiement.pourcentage.deplacement')) {\n                paiement.pourcentage = _.clone(inter.artisan.pourcentage)\n            }\n\n            reglement.montant = _.get(inter, 'compta.reglement.montant', 0);\n            reglement.avoir = _.get(inter, 'compta.reglement.avoir', 0);\n            _this.pourcentage = inter.compta.paiement.pourcentage;\n            _this.fourniture = this.getFourniture(inter);\n            _this.prixHT = inter.compta.paiement.base\n            _this.montantHT = _this.prixHT - _this.fourniture.total\n            _this.baseDeplacement = _this.prixDeplacement()\n            _this.remunerationDeplacement = _this.applyCoeff(_this.baseDeplacement, _this.pourcentage.deplacement);\n            _this.baseMaindOeuvre = _this.prixMaindOeuvre();\n            _this.remunerationMaindOeuvre = _this.applyCoeff(_this.baseMaindOeuvre, _this.pourcentage.maindOeuvre);\n            _this.venteFourniture = _this.prixHT - (_this.baseDeplacement + _this.baseMaindOeuvre);\n            _this.coutFourniture = _this.fourniture.total;\n            _this.baseMargeFourniture = _this.venteFourniture - _this.coutFourniture;\n            _this.remunerationMargeFourniture = _this.applyCoeff(_this.baseMargeFourniture, _this.pourcentage.fourniture);\n            _this.remboursementFourniture = _this.fourniture.artisan;\n            _this.montantTotal = _this.remunerationDeplacement + _this.remunerationMargeFourniture + _this.remunerationMaindOeuvre + _this.remboursementFourniture;\n        }\n    }\n\n\n    Compta.prototype = {\n        inter: {},\n        applyCoeff: function(number, Coeff) {\n            return _.round(number * (Coeff / 100), 2);\n        },\n        prixDeplacement: function() {\n            if (this.montantHT <= 65) {\n                return this.montantHT;\n            } else {\n                return 65;\n            }\n        },\n        prixMaindOeuvre: function() {\n            if (this.montantHT <= 65) {\n                return 0;\n            } else if (this.montant <= 65) {\n                return this.montantHT - 65;\n            } else {\n                return 65;\n            }\n        },\n        getFourniture: function(inter) {\n            var _this = this;\n            var fourniture = {\n                artisan: 0,\n                edison: 0,\n                total: 0\n            };\n            _.each(inter.fourniture, function(e) {\n                fourniture[e.fournisseur === 'ARTISAN' ? 'artisan' : 'edison'] += _.round(e.pu * e.quantite, 2);\n                fourniture.total += _.round(e.pu * e.quantite, 2);\n            })\n            return fourniture;\n        },\n        getMontantTTC: function() {\n            return this.applyCoeff(this.inter().compta.reglement.montant, 100 + this.inter().tva)\n        }\n    }\n    return Compta\n});\n","angular.module('edison').factory('ContextMenu', function($rootScope, $location, edisonAPI, $window, dialog, Devis, Intervention, Artisan, contextMenuData) {\n    \"use strict\";\n\n    var ContextMenu = function(model) {\n        var _this = this;\n        this.model = model\n        this.list = contextMenuData[model];\n        $rootScope.$on('closeContextMenu', function() {\n            return _this.active && _this.close();\n        })\n        this.style = {\n            left: 0,\n            top: 0,\n            display: \"none\"\n        }\n    }\n\n    ContextMenu.prototype.getData = function() {\n        return this.data;\n    }\n    ContextMenu.prototype.setData = function(data) {\n        this.data = data;\n    }\n\n    ContextMenu.prototype.setPosition = function(x, y) {\n        this.style.left = (x - $('#main-menu-inner').width()) - 4;\n        this.style.top = y - 48;\n    }\n\n    ContextMenu.prototype.active = false;\n\n    ContextMenu.prototype.open = function() {\n        var _this = this;\n        this.list.forEach(function(e) {\n            e.hidden = e.hide && e.hide(_this.data);\n        });\n        this.style.display = \"block\";\n        this.active = true;\n    }\n\n    ContextMenu.prototype.close = function() {\n        this.style.display = \"none\";\n        this.active = false;\n\n    }\n\n    ContextMenu.prototype.modelObject = {\n        intervention: Intervention,\n        devis: Devis,\n        artisan: Artisan\n    }\n\n    ContextMenu.prototype.click = function(link) {\n        if (typeof link.action === 'function') {\n            return link.action(this.getData())\n        } else if (typeof link.action === 'string') {\n            console.log(this.data);\n            return this.modelObject[this.model]()[link.action].bind(this.data)();\n        } else {\n            console.error(\"error here\")\n        }\n    }\n\n\n    return ContextMenu\n\n});\n","angular.module('edison').factory('DataProvider', ['edisonAPI', 'socket', '$rootScope', 'config', function(edisonAPI, socket, $rootScope, config) {\n    \"use strict\";\n    var DataProvider = function(model, hashModel) {\n        var _this = this;\n        this.model = model;\n        this.hashModel = hashModel || 't';\n        socket.on(_this.socketListChange(), function(newData) {\n            if (_this.getData()) {\n                _this.updateData(newData);\n            }\n        });\n    }\n\n    DataProvider.prototype.socketListChange = function() {\n        var _this = this;\n        return _this.model.toUpperCase() + '_CACHE_LIST_CHANGE';\n    }\n\n    DataProvider.prototype.data = {}\n\n    DataProvider.prototype.setData = function(data) {\n        this.data[this.model] = data;\n    };\n\n    DataProvider.prototype.init = function(cb) {\n        var _this = this;\n\n        if (_this.getData())\n            return cb(_this.getData());\n        edisonAPI[_this.model].list({\n            cache: true\n        }).success(function(resp) {\n            _this.setData(resp);\n            return cb(null, resp);\n        })\n    }\n\n    DataProvider.prototype.rowFilterFactory = function(filter, hash) {\n        var _this = this;\n        if (!filter && hash) {\n            return function onlyLogin(inter) {\n                return inter[_this.hashModel] === hash;\n            }\n        }\n        if (filter && hash) {\n            return function loginAndFilter(inter) {\n                return inter.f && inter.f[filter.short_name] === 1 && inter[_this.hashModel] === hash;\n            }\n        }\n        if (filter && !hash) {\n            return function onlyFilter(inter) {\n                return inter.f && inter.f[filter.short_name] === 1;\n            }\n        }\n    }\n\n    DataProvider.prototype.applyFilter = function(filter, hash, customFilter) {\n        this.filteredData = this.getData();\n        if (this.getData() && (filter || hash || customFilter)) {\n            this.filteredData = _.filter(this.getData(), customFilter || this.rowFilterFactory(filter, hash));\n        }\n    }\n\n    DataProvider.prototype.updateData = function(newRow) {\n        var _this = this;\n        if (this.getData()) {\n            var index = _.findIndex(this.getData(), function(e) {\n                return e.id === newRow.id\n            });\n            if (index === -1) {\n                _this.getData().unshift(newRow)\n            } else {\n                _this.getData()[index] = newRow;\n            }\n            $rootScope.$broadcast(_this.socketListChange(), newRow);\n        }\n    }\n\n    DataProvider.prototype.getData = function() {\n        return this.data[this.model];\n    }\n\n\n    DataProvider.prototype.isInit = function() {\n        return this.model && this.data && this.data[this.model];\n    }\n    return DataProvider;\n\n}]);\n","angular.module('edison')\n    .factory('Devis', function(openPost, $window, $rootScope, $location, LxNotificationService, LxProgressService, dialog, edisonAPI, textTemplate) {\n        \"use strict\";\n        var Devis = function(data) {\n            if (!(this instanceof Devis)) {\n                return new Devis(data);\n            }\n            for (var k in data) {\n                this[k] = data[k];\n            }\n        }\n        Devis.prototype.typeOf = function() {\n            return 'Devis';\n        }\n        Devis.prototype.save = function(cb) {\n            var _this = this;\n            console.log('yay')\n            edisonAPI.devis.save(_this)\n                .then(function(resp) {\n                    console.log('resp')\n                    var validationMessage = _.template(\"Les donnÃ©es du devis {{id}} ont Ã  Ã©tÃ© enregistrÃ©\")(resp.data);\n                    LxNotificationService.success(validationMessage);\n                    if (typeof cb === 'function')\n                        cb(null, resp.data)\n                }, function(error) {\n                    console.log('err')\n                    LxNotificationService.error(error.data);\n                    if (typeof cb === 'function')\n                        cb(\"une erreur est \" + error.data)\n                }).catch(function(e) {\n                    console.log('ERRRR:>', e)\n                })\n        };\n\n        Devis.prototype.devisPreview = function() {\n            if (!this.client.nom || !this.client.prenom || !this.client.address.r || !this.client.address.v || Â !this.client.address.cp || !this.client.address.n) {\n                return LxNotificationService.error('Les coordonÃ©es du devis sont incompletes');\n            }\n            if (!this.produits || !this.produits.length) {\n                return LxNotificationService.error('Veuillez renseigner au moins 1 produits');\n            }\n            openPost('/api/intervention/devisPreview', {\n                data: JSON.stringify(this),\n                html: true\n            })\n        }\n\n        Devis.prototype.sendDevis = function(cb) {\n            var _this = this;\n            var preview = Devis(this).devisPreview.bind(this)\n            dialog.getTextDevis(preview, {\n                text: textTemplate.mail.devis.envoi.bind(_this)($rootScope.user),\n                width: \"900px\",\n                height: \"700px\"\n            }, function(text) {\n                LxProgressService.circular.show('#5fa2db', '#globalProgress');\n                edisonAPI.devis.envoi(_this.id, {\n                    text: text,\n                }).success(function(resp) {\n                    LxProgressService.circular.hide()\n                    var validationMessage = _.template(\"le devis {{id}} Ã  Ã©tÃ© envoyÃ©\")(_this);\n                    LxNotificationService.success(validationMessage);\n                    if (typeof cb === 'function') {\n                        console.log('yes cb')\n                        cb(null, resp);\n                    }\n                }, function(err) {\n                    LxProgressService.circular.hide()\n                    var validationMessage = _.template(\"L'envoi du devis {{id}} Ã  Ã©chouÃ©\\n\")(_this)\n                    if (err && err.data && typeof err.data === 'string')\n                        validationMessage += ('\\n(' + err.data + ')')\n                    LxNotificationService.error(validationMessage);\n                    if (typeof cb === 'function')\n                        cb(err);\n                }).catch(function(err) {\n                    LxProgressService.circular.hide()\n                    var validationMessage = _.template(\"L'envoi du devis {{id}} Ã  Ã©chouÃ©\\n\")(_this)\n                    if (err && err.data && typeof err.data === 'string')\n                        validationMessage += ('\\n(' + err.data + ')')\n                    LxNotificationService.error(validationMessage);\n                    if (typeof cb === 'function')\n                        cb(err);\n                })\n\n            })\n        }\n        Devis.prototype.annulation = function(cb) {\n            var _this = this;\n            dialog.getCauseAnnulation(function(causeAnnulation) {\n                edisonAPI.devis.annulation(_this.id, causeAnnulation)\n                    .then(function(resp) {\n                        var validationMessage = _.template(\"Le devis {{id}} est annulÃ©\")(resp.data)\n                        LxNotificationService.success(validationMessage);\n                        if (typeof cb === 'function')\n                            cb(null, resp.data)\n                    });\n            });\n        };\n\n        Devis.prototype.ouvrirFiche = function() {\n            $location.url(\"/devis/\" + this.id);\n        }\n        Devis.prototype.transfert = function() {\n            $location.url(\"/intervention?devis=\" + this.id);\n        }\n        return Devis;\n    });\n","angular.module('edison').factory('dialog', function($mdDialog, edisonAPI, config, $window, LxNotificationService) {\n    \"use strict\";\n\n    return {\n        verification: function(inter, cb) {\n            $mdDialog.show({\n                controller: function DialogController($scope, $mdDialog, config) {\n                    $scope.data = inter\n                    $scope.config = config;\n                    $scope.answer = function(cancel) {\n                        $scope.window = $window;\n                        $scope.inter = inter;\n                        if (!cancel) {\n                            if (!$scope.inter.prixFinal) {\n                                LxNotificationService.error(\"Veuillez renseigner un prix final\");\n                            } else {\n                                $mdDialog.hide();\n                                cb(inter);\n                            }\n                        } else {\n                                $mdDialog.hide();\n                        }\n                    }\n                },\n                templateUrl: '/DialogTemplates/verification.html',\n            });\n        },\n        facturierDeviseur: function(artisan, cb) {\n            $mdDialog.show({\n                controller: function DialogController($scope, $mdDialog, config) {\n                    $scope.sst = artisan\n                    $scope.answer = function(cancel) {\n                        $mdDialog.hide();\n\n                        if (!cancel) {\n                            cb($scope.facturier, $scope.deviseur);\n                        }\n                    }\n                },\n                templateUrl: '/DialogTemplates/facturierDeviseur.html',\n            });\n        },\n        envoiFacture: function(inter, text, options, cb) {\n            $mdDialog.show({\n                controller: function DialogController($scope, $mdDialog) {\n                    $scope.text = text\n                    $scope.date = new Date();\n                    $scope.options = options\n                    $scope.acquitte = false;\n                    $scope.answer = function(cancel) {\n                        $mdDialog.hide();\n                        if (!cancel) {\n                            cb(null, $scope.text, $scope.acquitte, $scope.date);\n                        } else {\n                            cb('nope')\n                        }\n                    }\n                },\n                templateUrl: '/DialogTemplates/envoiFacture.html',\n            });\n        },\n        recap: function(inters) {\n            $mdDialog.show({\n                controller: function DialogController($scope, $mdDialog, config) {\n                    $scope.inters = inters;\n                    $scope.config = config\n                    $scope.answer = function() {\n                        $mdDialog.hide();\n                    }\n                },\n                templateUrl: '/DialogTemplates/recapList.html',\n            });\n        },\n        callsList: function(sst) {\n            $mdDialog.show({\n                controller: function DialogController($scope, $mdDialog) {\n                    $scope.sst = sst;\n                    $scope.answer = function() {\n                        $mdDialog.hide();\n                    }\n                },\n                templateUrl: '/DialogTemplates/callsList.html',\n            });\n        },\n        smsList: function(sst) {\n            $mdDialog.show({\n                controller: function DialogController($scope, $mdDialog) {\n                    $scope.sst = sst;\n                    $scope.answer = function() {\n                        $mdDialog.hide();\n                    }\n                },\n                templateUrl: '/DialogTemplates/smsList.html',\n            });\n        },\n        choiceText: function(options, cb) {\n            $mdDialog.show({\n                controller: function DialogController($scope, $mdDialog) {\n                    $scope.options = options;\n                    $scope.answer = function(resp, text) {\n                        $mdDialog.hide();\n                        return cb(resp, text);\n                    }\n                },\n                templateUrl: '/DialogTemplates/choiceText.html',\n            });\n        },\n        addProd: function(cb) {\n            $mdDialog.show({\n                controller: function DialogController($scope, $mdDialog, $window) {\n                    $scope.pu = 0;\n                    $scope.window = $window\n                    $scope.quantite = 1;\n                    $scope.prod = {\n                        quantite: 1,\n                        pu: 0,\n                        title: \"\",\n                        ref: \"\"\n                    }\n                    $scope.$watch('prod', function() {\n                        $scope.prod.ref = $scope.prod.ref.toUpperCase();\n                        $scope.prod.title = $scope.prod.title.toUpperCase();\n                        $scope.prod.desc = $scope.prod.title;\n                        $scope.prod.pu = $scope.prod.pu;\n                        $scope.prod.quantite = $scope.prod.quantite;\n                    }, true)\n                    $scope.answer = function(resp, text) {\n                        $mdDialog.hide();\n                        return cb($scope.prod);\n                    }\n                },\n                templateUrl: '/DialogTemplates/getProd.html',\n            });\n        },\n        getCauseAnnulation: function(cb) {\n            $mdDialog.show({\n                controller: function($scope, config) {\n                    $scope.causeAnnulation = config.causeAnnulation;\n                    $scope.answer = function(resp) {\n                        if (!$scope.ca && resp)\n                            return cb('nope');\n                        $mdDialog.hide();\n                        if (resp)\n                            return cb(null, resp);\n                        return cb('nop')\n                    }\n                },\n                templateUrl: '/DialogTemplates/causeAnnulation.html',\n            });\n        },\n        sendContrat: function(options, cb) {\n            $mdDialog.show({\n                controller: function DialogController($scope, $mdDialog) {\n                    options.signe = true;\n                    $scope.options = options;\n                    $scope.answer = function(cancel) {\n                        $mdDialog.hide();\n                        if (!cancel)\n                            return cb($scope.options);\n                    }\n                },\n                templateUrl: '/DialogTemplates/sendContrat.html',\n            });\n        },\n        getText: function(options, cb) {\n            $mdDialog.show({\n                controller: function DialogController($scope, $mdDialog) {\n                    $scope.options = options;\n                    $scope.answer = function(cancel) {\n                        $mdDialog.hide();\n                        if (!cancel)\n                            return cb($scope.options.text);\n                    }\n                },\n                templateUrl: '/DialogTemplates/text.html',\n            });\n        },\n        getTextDevis: function(previewFunction, options, cb) {\n            $mdDialog.show({\n                controller: function DialogController($scope, $mdDialog) {\n                    $scope.options = options;\n                    $scope.previewFunction = previewFunction;\n                    $scope.answer = function(cancel) {\n                        $mdDialog.hide();\n                        if (!cancel)\n                            return cb($scope.options.text);\n                    }\n                },\n                templateUrl: '/DialogTemplates/textDevis.html',\n            });\n        },\n        getFileAndText: function(data, text, files, cb) {\n            $mdDialog.show({\n                controller: function DialogController($scope, $mdDialog) {\n\n                    $scope.xfiles = _.clone(files || Â []);\n                    $scope.smsText = text;\n                    $scope.answer = function(cancel) {\n                        $mdDialog.hide();\n                        if (cancel === false) {\n                            return cb(null, $scope.smsText, $scope.addedFile);\n                        } else {\n                            return cb('nope');\n                        }\n                    }\n                },\n                templateUrl: '/DialogTemplates/fileAndText.html',\n            });\n        },\n        editProduct: {\n            open: function(produit, cb) {\n                $mdDialog.show({\n                    controller: function DialogController($scope, $mdDialog) {\n                        $scope.produit = _.clone(produit);\n                        $scope.mdDialog = $mdDialog;\n                        $scope.answer = function(p) {\n                            $mdDialog.hide(p);\n                            return cb(p);\n                        }\n                    },\n                    templateUrl: '/DialogTemplates/edit.html',\n                });\n            }\n        },\n        selectSubProduct: function(elem, callback) {\n            $mdDialog.show({\n                controller: function DialogController($scope, $mdDialog) {\n                    $scope.elem = elem\n                    $scope.answer = function(cancel, item) {\n                        $mdDialog.hide();\n                        if (!cancel) {\n                            return callback(item)\n                        }\n                    }\n                },\n                templateUrl: '/DialogTemplates/selectSubProduct.html',\n            });\n        }\n    }\n\n});\n","angular.module('edison').factory('fourniture', [function() {\n    \"use strict\";\n\n    return {\n        init: function(fourniture) {\n            this.fourniture = fourniture;\n            if (!this.fourniture)\n                this.fourniture = [];\n            return this;\n        },\n        remove: function(index) {\n            this.fourniture.splice(index, 1);\n        },\n        moveTop: function(index) {\n            if (index !== 0) {\n                var tmp = this.fourniture[index - 1];\n                this.fourniture[index - 1] = this.fourniture[index];\n                this.fourniture[index] = tmp;\n            }\n\n        },\n        moveDown: function(index) {\n            if (index !== this.fourniture.length - 1) {\n                var tmp = this.fourniture[index + 1];\n                this.fourniture[index + 1] = this.fourniture[index];\n                this.fourniture[index] = tmp;\n            }\n        },\n        add: function() {\n            this.fourniture.push({\n                bl: '0',\n                title: 'Fourniture',\n                fournisseur: 'ARTISAN',\n                quantite: 1,\n                pu: 0\n            });\n        },\n        total: function() {\n            var total = 0;\n            if (this.fourniture) {\n                this.fourniture.forEach(function(e) {\n                    total += (e.pu * e.quantite);\n                })\n            }\n            return total\n        }\n    }\n\n}]);\n","angular.module('edison')\n    .factory('Intervention', function($location, $window, openPost, LxNotificationService, LxProgressService, dialog, edisonAPI, Devis, $rootScope, textTemplate) {\n        \"use strict\";\n\n        var Intervention = function(data) {\n            if (!(this instanceof Intervention)) {\n                return new Intervention(data);\n            }\n            for (var k in data) {\n                this[k] = data[k];\n            }\n        };\n\n\n        Intervention.prototype.typeOf = function() {\n            return 'Intervention';\n        };\n        Intervention.prototype.envoiDevis = function(cb) {\n            Devis().envoi.bind(this)(cb)\n        };\n\n\n        Intervention.prototype.demarcher = function(cb) {\n            edisonAPI.intervention.demarcher(this.id).success(function() {\n                LxNotificationService.success(\"Vous demarchez l'intervention\");\n            }, function() {\n                LxNotificationService.error(\"Une erreur est survenu\");\n            })\n        };\n\n        Intervention.prototype.facturePreview = function() {\n            openPost('/api/intervention/facturePreview', {\n                data: JSON.stringify(this),\n                html: true\n            })\n        }\n\n        Intervention.prototype.factureAcquittePreview = function() {\n\n            openPost('/api/intervention/factureAcquittePreview', {\n                data: JSON.stringify(this),\n                html: true\n            })\n        }\n\n\n        Intervention.prototype.sendFacture = function(cb) {\n            var _this = this;\n            var datePlain = moment(this.date.intervention).format('LL');\n            console.log(_this)\n            var template = textTemplate.mail.intervention.envoiFacture.bind(_this)(datePlain)\n            var mailText = (_.template(template)(this))\n            dialog.envoiFacture(_this, mailText, false, function(err, text, acquitte, date) {\n                if (err)\n                    return cb('nope')\n                LxProgressService.circular.show('#5fa2db', '#globalProgress');\n                edisonAPI.intervention.sendFacture(_this.id, {\n                    text: text,\n                }).success(function(resp) {\n                    LxProgressService.circular.hide();\n                    var validationMessage = _.template(\"La facture de l'intervention {{id}} Ã  Ã©tÃ© envoyÃ©\")(_this)\n                    LxNotificationService.success(validationMessage);\n                    if (typeof cb === 'function')\n                        cb(null, resp);\n                }).catch(function(err) {\n                    LxProgressService.circular.hide();\n                    var validationMessage = _.template(\"L'envoi de la facture {{id}} Ã  Ã©chouÃ©\\n\" + \"(\" + err.data + \")\")(_this)\n                    LxNotificationService.error(validationMessage);\n                    if (typeof cb === 'function')\n                        cb(err);\n                })\n            })\n        }\n\n        Intervention.prototype.ouvrirFicheV1 = function() {\n            $window.open('http://electricien13003.com/alvin/5_Gestion_des_interventions/show_res_bis_2.php?id_client=' + this.id)\n        }\n        Intervention.prototype.ouvrirFiche = function() {\n            $location.url('/intervention/' + this.id)\n        }\n        Intervention.prototype.ouvrirRecapSST = function() {\n            $location.url(['/artisan', this.artisan.id, 'recap'].join('/') + '#interventions')\n        }\n        Intervention.prototype.smsArtisan = function(cb) {\n            var _this = this;\n            var text = textTemplate.sms.intervention.demande.bind(_this)($rootScope.user)\n            dialog.getFileAndText(_this, text, [], function(err, text) {\n                if (err) {\n                    return cb(err)\n                }\n                edisonAPI.sms.send({\n                    link: _this.artisan.id,\n                    origin: _this.id || _this.tmpID,\n                    text: text,\n                    to: $rootScope.user.portable || \"0633138868\"\n                }).success(function(resp) {\n                    var validationMessage = _.template(\"Un sms a Ã©tÃ© envoyÃ© Ã  M. {{artisan.representant.nom}}\")(_this)\n                    LxNotificationService.success(validationMessage);\n                    if (typeof cb === 'function')\n                        cb(null, resp);\n                }).catch(function(err) {\n                    LxNotificationService.success(\"L'envoi du sms a Ã©chouÃ©\");\n                    if (typeof cb === 'function')\n                        cb(err);\n                })\n            })\n        };\n\n        Intervention.prototype.callClient = function(cb) {\n            var _this = this;\n            var now = Date.now();\n            $window.open('callto:' + _this.client.telephone.tel1, '_self', false)\n            dialog.choiceText({\n                subTitle: _this.client.telephone.tel1,\n                title: 'Nouvel Appel Client',\n            }, function(response, text) {\n                edisonAPI.call.save({\n                    date: now,\n                    to: _this.client.telephone.tel1,\n                    link: _this.id,\n                    origin: _this.id || _this.tmpID || 0,\n                    description: text,\n                    response: response\n                }).success(function(resp) {\n                    if (typeof cb === 'function')\n                        cb(null, resp);\n                }).catch(function(err) {\n                    if (typeof cb === 'function')\n                        cb(err);\n                })\n            })\n        }\n        Intervention.prototype.callArtisan = function(cb) {\n            var _this = this;\n            var now = Date.now();\n            $window.open('callto:' + _this.artisan.telephone.tel1, '_self', false)\n            dialog.choiceText({\n                subTitle: _this.artisan.telephone.tel1,\n                title: 'Nouvel Appel',\n            }, function(response, text) {\n                edisonAPI.call.save({\n                    date: now,\n                    to: _this.artisan.telephone.tel1,\n                    link: _this.artisan.id,\n                    origin: _this.id || _this.tmpID || 0,\n                    description: text,\n                    response: response\n                }).success(function(resp) {\n                    if (typeof cb === 'function')\n                        cb(null, resp);\n                }).catch(function(err) {\n                    if (typeof cb === 'function')\n                        cb(err);\n                })\n            })\n        };\n        Intervention.prototype.absenceArtisan = function(cb) {\n            var _this = this;\n            dialog.absence(function(start, end) {\n                edisonAPI.artisan.setAbsence(_this.artisan.id, {\n                    start: start,\n                    end: end\n                }).success(cb)\n            })\n        }\n        Intervention.prototype.save = function(cb) {\n            var _this = this;\n            edisonAPI.intervention.save(_this)\n                .then(function(resp) {\n                    var validationMessage = _.template(\"Les donnÃ©es de l'intervention {{id}} ont Ã  Ã©tÃ© enregistrÃ©\")(resp.data)\n                    LxNotificationService.success(validationMessage);\n                    if (typeof cb === 'function')\n                        cb(null, resp.data)\n                }, function(error) {\n                    LxNotificationService.error(error.data);\n                    if (typeof cb === 'function')\n                        cb(error.data)\n                });\n        };\n\n        Intervention.prototype.envoi = function(cb) {\n            var _this = this;\n            var defaultText = textTemplate.sms.intervention.envoi.bind(_this)($rootScope.user);\n            dialog.getFileAndText(_this, defaultText, _this.files, function(err, text, file) {\n                if (err)\n                    return cb(err)\n                LxProgressService.circular.show('#5fa2db', '#globalProgress');\n                edisonAPI.intervention.envoi(_this.id, {\n                    sms: text,\n                    file: file\n                }).then(function(resp) {\n                    LxProgressService.circular.hide();\n                    console.log('ok')\n                    var validationMessage = _.template(\"L'intervention est envoyÃ©\")\n                    LxNotificationService.success(validationMessage);\n                    if (typeof cb === 'function')\n                        cb(null, resp.data)\n\n                }, function(error) {\n                    LxProgressService.circular.hide();\n                    console.log('error')\n                    LxNotificationService.error(error.data);\n                    if (typeof cb === 'function')\n                        cb(error.data);\n                });\n            })\n        };\n\n\n        Intervention.prototype.reactivation = function(cb) {\n            var _this = this;\n            edisonAPI.intervention.reactivation(this.id).then(function() {\n                LxNotificationService.success(\"L'intervention \" + _this.id + \" est Ã  programmer\");\n            })\n        };\n\n        Intervention.prototype.annulation = function(cb) {\n            var _this = this;\n            dialog.getCauseAnnulation(function(err, causeAnnulation) {\n                if (err) {\n                    return cb('err');\n                }\n                edisonAPI.intervention.annulation(_this.id, causeAnnulation)\n                    .then(function(resp) {\n                        var validationMessage = _.template(\"L'intervention {{id}} est annulÃ©\")(resp.data)\n                        LxNotificationService.success(validationMessage);\n                        if (typeof cb === 'function') {\n                            cb(null, resp.data)\n                        }\n                    });\n            });\n        };\n\n\n        Intervention.prototype.envoiFactureVerif = function(cb) {\n            var _this = this;\n\n            if (!this.produits.length) {\n                LxNotificationService.error(\"Veuillez renseigner les produits\");\n                return cb('nope')\n            }\n            _this.sendFacture(function(err) {\n                if (err)\n                    return cb(err);\n                _this.verificationSimple(cb)\n            })\n        }\n\n        Intervention.prototype.verificationSimple = function(cb) {\n            var _this = this;\n            LxProgressService.circular.show('#5fa2db', '#globalProgress');\n\n            edisonAPI.intervention.verification(_this.id)\n                .then(function(resp) {\n                    LxProgressService.circular.hide()\n                    var validationMessage = _.template(\"L'intervention {{id}} est vÃ©rifiÃ©\")(resp.data)\n                    LxNotificationService.success(validationMessage);\n                    if (typeof cb === 'function') {\n                        cb(null, resp.data);\n                    }\n                }, function(error) {\n                    LxProgressService.circular.hide()\n                    LxNotificationService.error(error.data);\n                    cb(error.data);\n                })\n        }\n\n        Intervention.prototype.verification = function(cb) {\n            var _this = this;\n            if (!_this.reglementSurPlace) {\n                return $location.url('/intervention/' + this.id)\n            }\n            dialog.verification(_this, function(inter) {\n                Intervention(inter).save(function(err, resp) {\n                    if (!err) {\n                        return Intervention(resp).verificationSimple(cb);\n                    }\n                });\n            });\n        }\n        Intervention.prototype.fileUpload = function(file, cb) {\n\n            var _this = this;\n\n            if (file) {\n                LxProgressService.circular.show('#5fa2db', '#fileUploadProgress');\n                edisonAPI.file.upload(file, {\n                    link: _this.id || _this.tmpID,\n                    model: 'intervention',\n                    type: 'fiche'\n                }).success(function(resp) {\n                    LxProgressService.circular.hide();\n                    if (typeof cb === 'function')\n                        cb(null, resp);\n                }).catch(function(err) {\n                    LxProgressService.circular.hide();\n                    if (typeof cb === 'function')\n                        cb(err);\n                })\n            }\n        }\n\n        Intervention.prototype.editCB = function() {\n            var _this = this;\n            edisonAPI.intervention.getCB(this.id).success(function(resp) {\n                _this.cb = resp;\n            }, function(error) {\n                LxNotificationService.error(error.data);\n            })\n        }\n\n        Intervention.prototype.reinitCB = function() {\n            this.cb = {\n                number: 0\n            }\n        }\n\n\n\n        return Intervention;\n    });\n"," angular.module('edison').directive('whenScrollEnds', function() {\n        return {\n            restrict: \"A\",\n            link: function(scope, element, attrs) {\n                var visibleHeight = element.height();\n                var threshold = 100;\n\n                element.scroll(function() {\n                    var scrollableHeight = element.prop('scrollHeight');\n                    var hiddenContentHeight = scrollableHeight - visibleHeight;\n\n                    if (hiddenContentHeight - element.scrollTop() <= threshold) {\n                        // Scroll is almost at the bottom. Loading more rows\n                        scope.$apply(attrs.whenScrollEnds);\n                    }\n                });\n            }\n        };\n    });","angular.module('edison').factory('Map', function() {\n    \"use strict\";\n\n    var Map = function() {\n        this.display = false;\n    }\n\n    Map.prototype.setCenter = function(address) {\n        var myLatLng = new google.maps.LatLng(address.lt, address.lg);\n        this.center = address;\n        if (window.map)\n            window.map.setCenter(myLatLng)\n    }\n\n    Map.prototype.setZoom = function(value) {\n         if (window.map)\n            window.map.setZoom(value)\n        this.zoom = value\n    }\n    Map.prototype.show = function() {\n        this.display = true;\n    }\n    return Map;\n});\n","angular.module('edison').factory('mapAutocomplete', ['$q', 'Address',\n    function($q, Address) {\n        \"use strict\";\n        var autocomplete = function() {\n            this.service = new google.maps.places.AutocompleteService();\n            this.geocoder = new google.maps.Geocoder();\n        }\n\n        autocomplete.prototype.search = function(input) {\n            var deferred = $q.defer();\n            this.service.getPlacePredictions({\n                input: input,\n                componentRestrictions: {\n                    country: 'fr'\n                }\n            }, function(predictions) {\n                if (predictions)\n                    predictions.forEach(function(e) {\n                        if (e.description === input)\n                            predictions = null;\n                    })\n                deferred.resolve(predictions || []);\n            });\n            return deferred.promise;\n        }\n\n        autocomplete.prototype.getPlaceAddress = function(place) {\n            var self = this;\n            return $q(function(resolve, reject) {\n                self.geocoder.geocode({\n                    'address': place.description\n                }, function(result, status) {\n                    if (status !== google.maps.places.PlacesServiceStatus.OK)\n                        return reject(status);\n                    return resolve(Address(result[0]));\n                });\n\n            });\n        };\n\n        return new autocomplete();\n\n    }\n]);\n","angular.module('edison').factory('openPost', [function() {\n    \"use strict\";\n    return function(url, data) {\n        var mapForm = document.createElement(\"form\");\n        mapForm.target = \"_blank\";\n        mapForm.method = \"POST\";\n        mapForm.action = url;\n\n        // Create an input\n        _.each(data, function(e, i) {\n                var mapInput = document.createElement(\"input\");\n                mapInput.type = \"text\";\n                mapInput.name = i;\n                mapInput.value = typeof e == 'object' ? JSON.stringify(e) : e;\n                mapForm.appendChild(mapInput);\n            })\n            // Add the form to dom\n        document.body.appendChild(mapForm);\n\n        // Just submit\n        mapForm.submit();\n        mapForm.remove();\n    }\n}]);\n","angular.module('edison').factory('productsList', function($q, dialog, openPost, edisonAPI) {\n    \"use strict\";\n    var ps = [{\n        quantite: 1,\n        ref: \"EDI001\",\n        title: \"Main d'Åuvre\",\n        desc: \"Main d'Åuvre\",\n        pu: 65\n    }, {\n        quantite: 1,\n        ref: \"EDI002\",\n        title: \"DÃ©placement\",\n        desc: \"DÃ©placement\",\n        pu: 65\n    }, {\n        quantite: 1,\n        ref: \"EDI005\",\n        title: \"Forfait Intervention\",\n        desc: \"Forfait INSTALLATION / MAIN D\\'OUVRAGEEssais et mise en service inclus\",\n        pu: 130\n    }, {\n        quantite: 1,\n        ref: \"FRN001\",\n        title: \"Fourniture\",\n        desc: \"\",\n        pu: 0\n    }, {\n        quantite: 1,\n        ref: \"BAL001\",\n        title: \"ballon mural vertical\",\n        desc: \"Chauffe-eau Ã©lectrique mural vertical\\nRÃ©sistance blindÃ©e anti-calcaire\\nPuissance : 1800 W\\nType de courant : monophasÃ©\\nV = 200L\\n\\nRACCORDEMENT ÃLECTRIQUE MONO 220V (HEURE CREUSE / PLEINE)\\n\\nMARQUE ATLANTIC CERTIFIE\\n\\nGarantie constructeur : Jusqu'Ã  5 ans\\nGarante piÃ¨ce d'origine : Jusqu'Ã  2 ans\\n\\nAssistance et dÃ©pannage constructeur inclus jusqu'Ã  2 ans\\n\\nESSAIS ET MISE EN SERVICE INCLUS\",\n        pu: 432.1\n\n    }, {\n        quantite: 1,\n        ref: \"BAL002\",\n        title: \"groupe de securitÃ©\",\n        desc: \"Groupe de sÃ©curitÃ© anti-calcaire 3/4.Robinet Ã  sphÃ¨re.\\nClapet dÃ©montable\\nRaccordement eau froide et chauffe eau : 20/27.Echappement 26/34.7 bars.\\nEntonnoir siphon\",\n        pu: 69.97\n    }, {\n        quantite: 1,\n        ref: \"BAL003\",\n        title: \"Raccordement hydraulique\",\n        desc: \"Raccordement hydraulique\\nFlexibles inox de 50 cm F20/27 Ã¸ 16 mm\",\n        pu: 16.33\n    }, {\n        quantite: 1,\n        ref: \"BAL004\",\n        title: \"TrÃ©pied Ballon\",\n        desc: \"TrÃ©pied pour chauffe-eau Ã©lectrique.\\nAccessoire obligatoire pour l'installation d'un chauffe-eau Ã©lectrique de 100, 150, ou 200 litres sur un mur non porteur\",\n        pu: 93.21\n    }, {\n        quantite: 1,\n        ref: 'VIT001',\n        title: \"Remplacement Vitrage\",\n        desc: \"Remplacement d'un vitrage suite a un bris de glace \\nporte fenÃªtre\\ndouble vitrage\\nvitrage clair\\n2000 x 1000\\nchÃ¢ssis pvc / alu / bois\\n\\ncommande spÃ©ciale sur mesure\\nadaptation et fixation sur place\\n\\nremplacement a l'identique\",\n        pu: 297.13\n    }, {\n        quantite: 1,\n        ref: \"VIT002\",\n        title: \"Pack Vitrerie\",\n        desc: \"depose/livraison + mise a la decharge + taxe energie\",\n        pu: 75\n    }, {\n        quantite: 1,\n        ref: \"SANI001\",\n        title: \"Pack Sanibroyeur\",\n        desc: \"PACK COMPLET SANIBROYEUR PRO\\nRefoulement horizontal < 100m\\nRefoulement vertical > 5m\\nRÃ©gime moteur > 2800 tr/min\\nNorme europÃ©enne \\nEN 12050-3\\nRaccordement hydraulique\\nRaccordement Ã©lectrique\\nGarantie constructeur\",\n        pu: 672.21\n    }, {\n        quantite: 1,\n        ref: \"CAM001\",\n        title: \"Camion D'assainisement\",\n        desc: \"DÃGORGEMENT CANALISATION TRÃS HAUTE PRESSION PAR CAMION DâASSAINISSEMENT : \\nCurage et nettoyage complet de la canalisation jusqu\\'Ã  10M\",\n        pu: 696.25\n    }, {\n        quantite: 1,\n        ref: \"AUT001\",\n        title: \"Autre\",\n        desc: \"\",\n        pu: 0\n    }];\n\n    var Produit = function(produits) {\n        this.produits = produits;\n        this.lastCall = _.now()\n    }\n    Produit.prototype = {\n        remove: function(index) {\n            this.produits.splice(index, 1);\n        },\n        moveTop: function(index) {\n            if (index !== 0) {\n                var tmp = this.produits[index - 1];\n                this.produits[index - 1] = this.produits[index];\n                this.produits[index] = tmp;\n            }\n\n        },\n        moveDown: function(index) {\n            if (index !== this.produits.length - 1) {\n                var tmp = this.produits[index + 1];\n                this.produits[index + 1] = this.produits[index];\n                this.produits[index] = tmp;\n            }\n        },\n        edit: function(index) {\n            var _this = this;\n            dialog.editProduct.open(this.produits[index], function(res) {\n                _this.produits[index] = res;\n            })\n        },\n        add: function(prod) {\n            if (this.lastCall + 100 > _.now())\n                return 0\n            this.lastCall = _.now()\n            this.searchText = '';\n            this.produits.push(prod);\n        },\n        /*        search: function(text) {\n                    var rtn = []\n                    for (var i = 0; i < ps.length; ++i) {\n                        if (text === ps[i].title)\n                            return [];\n                        var needle = _.deburr(text).toLowerCase()\n\n                        var haystack = _.deburr(ps[i].title).toLowerCase();\n                        var haystack2 = _.deburr(ps[i].ref).toLowerCase();\n                        var haystack3 = _.deburr(ps[i].desc).toLowerCase();\n                        if (_.includes(haystack, needle) ||\n                            _.includes(haystack2, needle) ||\n                            _.includes(haystack3, needle)) {\n                            var x = _.clone(ps[i])\n                            x.random = _.random();\n                            rtn.push(x)\n                        }\n                    }\n                    return rtn\n                },*/\n        search: function(text) {\n            var deferred = $q.defer();\n            edisonAPI.searchProduct(text)\n                .success(function(resp) {\n                    deferred.resolve(resp)\n                })\n            return deferred.promise;\n        },\n        getDetail: function(elem) {\n            if (!elem)\n                return 0\n            var _this = this;\n            dialog.selectSubProduct(elem, function(resp) {\n                var rtn = {\n                    quantite: 1,\n                    ref: resp.ref,\n                    title: elem.nom,\n                    desc: resp.nom + '\\n' + elem.description.split('-').join('\\n'),\n                    pu: Number(resp.prix)\n                }\n               _this.add(rtn)\n            })\n        },\n        flagship: function() {\n            return _.max(this.produits, 'pu');\n        },\n        total: function() {\n            var total = _.round(_.sum(this.produits, 'pu'), 2)\n            return total;\n        },\n\n    }\n\n    return Produit;\n\n\n});\n","angular.module('edison').factory('socket', function(socketFactory) {\n    \"use strict\";\n    return socketFactory();\n});\n","angular.module('edison').factory('tabContainer', ['$location', '$window', '$q', 'edisonAPI', function($location, $window, $q, edisonAPI) {\n    \"use strict\";\n    var Tab = function(args, options, prevTab) {\n\n        if (typeof args === 'object') {\n            //copy constructor\n            _.each(args, function(e, k) {\n                this[k] = e;\n            })\n        } else {\n            this.prevTab = prevTab || Â {}\n            this.urlFilter = options.urlFilter\n            this.hash = options.hash\n            this.url = args;\n            this.fullUrl = this.url + ['', $.param(this.urlFilter)].join(_.isEmpty(this.urlFilter) ? '' : '?') + (this.hash ? '#' + this.hash : '')\n            this.title = '';\n            this.position = null;\n            this.deleted = false;\n            this._timestamp = Date.now();\n        }\n    }\n\n    Tab.prototype.setData = function(data) {\n        //slice create a copy\n        this.data = data;\n    }\n\n    Tab.prototype.setTitle = function(title, subTitle) {\n        this.title = title;\n    }\n\n    var TabContainer = function() {\n        this._tabs = [];\n        this.selectedTab = 0;\n    }\n\n    TabContainer.prototype.loadSessionTabs = function(currentUrl) {\n        var _this = this;\n\n        return $q(function(resolve, reject) {\n            var currentUrlInSessionTabs = false;\n            edisonAPI.request({\n                fn: \"getSessionData\",\n            }).then(function(result) {\n                _this.selectedTab = result.data.selectedTab;\n                for (var i = 0; i < result.data._tabs.length; i++) {\n                    _this._tabs.push(new Tab(result.data._tabs[i]))\n                    if (result.data._tabs[i].url === currentUrl) {\n                        _this.selectedTab = i;\n                        currentUrlInSessionTabs = true;\n                    }\n                }\n                if (!currentUrlInSessionTabs) {\n                    return reject();\n                }\n                return resolve();\n            }).catch(reject);\n\n        })\n\n    }\n\n    TabContainer.prototype.setFocus = function(tab) {\n        this.selectedTab = (typeof tab === 'number' ? tab : tab.position);\n    };\n\n    TabContainer.prototype.createTab = function(url, options) {\n        var tab = new Tab(url, options, this.getCurrentTab());\n        tab.position = this._tabs.length;\n        this._tabs.push(tab);\n        return (tab);\n    }\n\n    TabContainer.prototype.isOpen = function(url, options) {\n        var index = _.findIndex(this._tabs, function(e) {\n            return !e.deleted && e.url === url &&\n                (!options.hash && !e.hash || options.hash == e.hash) &&\n                _.isEqual(options.urlFilter, e.urlFilter)\n        });\n        return (index >= 0);\n    };\n\n    TabContainer.prototype.getTab = function(url, options) {\n\n        return _.find(this._tabs, function(e) {\n            return !e.deleted && e.url === url &&\n                (!options.hash && !e.hash || options.hash == e.hash) &&\n                _.isEqual(options.urlFilter, e.urlFilter)\n        });\n    };\n\n    TabContainer.prototype.getTabSimple = function(url, options) {\n\n        return _.find(this._tabs, function(e) {\n            return !e.deleted && e.url.split('/')[1] === url.split('/')[1]\n        });\n    };\n\n    TabContainer.prototype.len = function() {\n        var size = 0;\n\n        this._tabs.forEach(function(e) {\n            size += !e.deleted;\n        })\n        return (size);\n    }\n\n    TabContainer.prototype.getPrevTab = function(tab) {\n\n        for (var i = tab.position - 1; i >= 0; i--) {\n            if (this._tabs[i].deleted === false)\n                return (this._tabs[i]);\n        }\n    };\n\n    TabContainer.prototype.close= function(tab) {\n        if (this.len() > 1) {\n            console.log(\"multiple tabs\")\n            if (this.remove(tab)) {\n                $location.url(tab.prevTab.fullUrl || Â '/intervention/list')\n            }\n        } else {\n            console.log(\"only tab\")\n            $location.url(tab.prevTab.fullUrl || Â '/intervention/list');\n            this.noClose = true;\n            //this.remove(tab);\n        }\n    }\n\n    TabContainer.prototype.remove = function(tab) {\n        var newTabs = [];\n        var j = 0;\n\n        if (this._tabs.length <= 1) {\n            return false;\n        }\n        var reload = (this.selectedTab === tab.position);\n        for (var i = 0; i < this._tabs.length; i++) {\n            if (i !== tab.position) {\n                newTabs.push(this._tabs[i]);\n                newTabs[j].position = j;\n                ++j;\n            }\n        }\n        this._tabs = newTabs;\n\n        if (this.selectedTab === tab.position && this.selectedTab !== 0) {\n            this.selectedTab--;\n        }\n        if (this.selectedTab > tab.position) {\n            this.selectedTab--;\n        }\n        return (reload);\n    }\n\n    TabContainer.prototype.getCurrentTab = function() {\n        return this._tabs[this.selectedTab];\n    }\n    TabContainer.prototype.addTab = function(url, options) {\n        var tab;\n        if (this.noClose) {\n            tab = this._tabs[0]\n        }\n        else if ((_.startsWith(url, '/search')  || _.startsWith(url, '/artisan/contact')) && this.getTabSimple(url)) {\n            tab = this.getTabSimple(url);\n        }\n        else if (this.noClose || this.isOpen(url, options)) {\n            tab = this.getTab(url, options)\n        } else {\n            tab = this.createTab(url, options);\n        }\n        this.noClose = false;\n        if (!(options && options.setFocus === false)) {\n            this.setFocus(tab)\n        }\n        if (options && options.title) {\n            tab.setTitle(options.title);\n        }\n    }\n\n    return (new TabContainer());\n\n}]);\n","angular.module('edison').factory('taskList', ['dialog', 'edisonAPI', function(dialog, edisonAPI) {\n    \"use strict\";\n    var Task = function(user) {\n        edisonAPI.get({\n            to: user,\n            done: false\n        })\n    }\n    Task.prototype = {\n        check: function(_id) {\n            edisonAPI.check({\n                _id: _id\n            })\n        },\n        add: function(params) {\n            edisonAPI.add(params)\n\n        }\n    }\n    return Task;\n\n\n}]);\n","angular.module('edison').factory('user', function($window) {\n    \"use strict\";\n    return $window.user;\n});\n"," angular.module('edison').directive('artisanCategorie', ['config', function(config) {\n     \"use strict\";\n     return {\n         replace: true,\n         restrict: 'E',\n         templateUrl: '/Templates/artisan-categorie.html',\n         transclude: true,\n         scope: {\n             model: \"=\",\n         },\n         link: function(scope, element, attrs) {\n             scope.config = config\n             scope.findColor = function(categorie) {\n                 var f = _.find(scope.model.categories, function(e)Â  {\n                     return e === categorie.short_name\n                 })\n                 return f ? categorie.color : \"white\";\n\n             }\n             scope.toggleCategorie = function(categorie) {\n                var f = scope.model.categories.indexOf(categorie);\n                if (f >= 0) {\n                    scope.model.categories.splice(f, 1);\n                } else {\n                    scope.model.categories.push(categorie)\n                }\n             }\n         },\n     }\n\n }]);\n","var ArtisanCtrl = function($rootScope, $location, $routeParams, ContextMenu, LxNotificationService, tabContainer, config, dialog, artisanPrm, Artisan) {\n    \"use strict\";\n    var _this = this;\n    _this.config = config;\n    _this.dialog = dialog;\n    _this.moment = moment;\n    _this.contextMenu = new ContextMenu('artisan')\n\n    var tab = tabContainer.getCurrentTab();\n    if (!tab.data) {\n        var artisan = new Artisan(artisanPrm.data)\n        tab.setData(artisan);\n        if ($routeParams.id.length > 12) {\n            _this.isNew = true;\n            artisan.tmpID = $routeParams.id;\n            tab.setTitle('SST  ' + moment((new Date(parseInt(artisan.tmpID))).toISOString()).format(\"HH:mm\").toString());\n        } else {\n            tab.setTitle('SST  ' + $routeParams.id);\n            if (!artisan) {\n                LxNotificationService.error(\"Impossible de trouver les informations !\");\n                $location.url(\"/dashboard\");\n                tabContainer.remove(tab);\n                return 0;\n            }\n        }\n    } else {\n        var artisan = tab.data;\n    }\n    _this.data = tab.data;\n    _this.saveArtisan = function(options) {\n        artisan.save(function(err, resp) {\n            if (err) {\n                return false;\n            } else if (options.contrat) {\n                artisan.envoiContrat.bind(resp)(tabContainer.close);\n            } else {\n                tabContainer.close(tab);\n            }\n        })\n    }\n    _this.onFileUpload = function(file, name) {\n        artisan.upload(file, name);\n    }\n\n    _this.clickTrigger = function(elem) {\n        angular.element(\"#file_\" + elem + \">input\").trigger('click');\n    }\n    _this.rightClick = function($event) {\n        console.log('rightClick')\n        _this.contextMenu.setPosition($event.pageX, $event.pageY)\n        _this.contextMenu.setData(artisan);\n        _this.contextMenu.open();\n    }\n\n    _this.leftClick = function($event, inter) {\n        console.log('leftClick')\n\n        if (_this.contextMenu.active)\n            return _this.contextMenu.close();\n    }\n\n    _this.addComment = function() {\n        artisan.comments.push({\n            login: $rootScope.user.login,\n            text: _this.commentText,\n            date: new Date()\n        })\n        _this.commentText = \"\";\n    }\n}\nangular.module('edison').controller('ArtisanController', ArtisanCtrl);\n","var archiveReglementController = function(edisonAPI, tabContainer, $routeParams, $location, LxProgressService) {\n\n    var tab = tabContainer.getCurrentTab();\n    var _this = this;\n    _this.title = 'Archives Reglements'\n    tab.setTitle('archives RGL')\n    LxProgressService.circular.show('#5fa2db', '#globalProgress');\n    edisonAPI.compta.archivesReglement().success(function(resp) {\n        LxProgressService.circular.hide()\n        _this.data = resp\n    })\n    _this.moment = moment;\n    _this.openLink = function(link) {\n        $location.url(link)\n    }\n}\n\nangular.module('edison').controller('archivesReglementController', archiveReglementController);\n\nvar archivesPaiementController = function(edisonAPI, tabContainer, $routeParams, $location, LxProgressService) {\n    var _this = this;\n    var tab = tabContainer.getCurrentTab();\n    _this.type = 'paiement'\n    _this.title = 'Archives Paiements'\n    tab.setTitle('archives PAY')\n    LxProgressService.circular.show('#5fa2db', '#globalProgress');\n    edisonAPI.compta.archivesPaiement().success(function(resp) {\n        LxProgressService.circular.hide()\n        _this.data = resp\n    })\n    _this.moment = moment;\n    _this.openLink = function(link) {\n        $location.url(link)\n    }\n}\n\nangular.module('edison').controller('archivesPaiementController', archivesPaiementController);\n","var AvoirsController = function(tabContainer, edisonAPI, $rootScope, LxProgressService, LxNotificationService, FlushList) {\n    \"use strict\";\n    var _this = this\n    var tab = tabContainer.getCurrentTab();\n    tab.setTitle('Avoirs')\n    _this.loadData = function(prevChecked) {\n        LxProgressService.circular.show('#5fa2db', '#globalProgress');\n        edisonAPI.compta.avoirs().then(function(result) {\n            console.log(result)\n            $rootScope.avoirs = result.data\n            LxProgressService.circular.hide()\n        })\n    }\n    if (!$rootScope.avoirs)\n        _this.loadData()\n\n    _this.reloadAvoir = function() {\n        _this.loadData()\n    }\n    _this.flush = function() {\n        var list = _.filter($rootScope.avoirs, {\n            checked: true\n        })\n        edisonAPI.compta.flushAvoirs(list).then(function(resp) {\n            LxNotificationService.success(resp.data);\n            _this.reloadAvoir()\n        }).catch(function(err) {\n            LxNotificationService.error(err.data);\n        })\n    }\n\n}\n\n\nangular.module('edison').controller('avoirsController', AvoirsController);\n","var ContactArtisanController = function($scope, $timeout, tabContainer, LxProgressService, FiltersFactory, ContextMenu, edisonAPI, DataProvider, $routeParams, $location, $q, $rootScope, $filter, config, ngTableParams) {\n    \"use strict\";\n    var _this = this;\n    _this.loadPanel = function(id) {\n        edisonAPI.artisan.get(id)\n            .then(function(resp) {\n                _this.sst = resp.data;\n                _this.tab.setTitle('@' + _this.sst.nomSociete.slice(0, 10));\n\n            })\n    }\n\n    if ($location.hash() === 'interventions') {\n        $scope.selectedIndex = 1\n    }\n    var dataProvider = new DataProvider('artisan');\n    var filtersFactory = new FiltersFactory('artisan')\n    var currentFilter;\n    if ($routeParams.fltr) {\n        currentFilter = filtersFactory.getFilterByUrl($routeParams.fltr)\n    }\n    var currentHash = $location.hash();\n    var title = currentFilter ? currentFilter.long_name : \"Artisan\";\n\n    LxProgressService.circular.show('#5fa2db', '#globalProgress');\n    dataProvider.init(function(err, resp) {\n\n        _this.tab = tabContainer.getCurrentTab();\n        _this.tab.setTitle(title, currentHash);\n        _this.tab.hash = currentHash;\n        _this.config = config;\n        _this.moment = moment;\n        if (!dataProvider.isInit()) {\n            dataProvider.setData(resp);\n        }\n\n        dataProvider.applyFilter(currentFilter, _this.tab.hash);\n        _this.tableFilter = \"\";\n        _this.tableLimit = 20;\n        $rootScope.expendedRow = $routeParams.id || 45\n        _this.recap = $location.url().includes('recap') ? $routeParams.id : undefined\n            // if (_this.recap) {\n            //     $scope.selectedIndex = 1;\n            // }\n        _this.loadPanel($rootScope.expendedRow)\n        _this.tableData = dataProvider.filteredData;\n        LxProgressService.circular.hide();\n    });\n    _this.getStaticMap = function(address) {\n        if (_this.sst && this.sst.address)\n            return \"/api/mapGetStatic?width=500&height=400&precision=0&zoom=6&origin=\" + _this.sst.address.lt + \", \" + _this.sst.address.lg;\n    }\n\n    _this.reloadData = function() {\n        _this.tableData = $filter('contactFilter')(dataProvider.filteredData, _this.tableFilter);\n    }\n\n    _this.loadMore = function() {\n        _this.tableLimit += 10;\n    }\n\n    /*\n        $rootScope.$watch('tableilter', _this.reloadData);\n    */\n    $rootScope.$on('ARTISAN_CACHE_LIST_CHANGE', function() {\n        if (_this.tab.fullUrl === tabContainer.getCurrentTab().fullUrl) {\n            dataProvider.applyFilter(currentFilter, _this.tab.hash);\n        }\n    })\n\n    _this.contextMenu = new ContextMenu('artisan')\n\n    _this.rowRightClick = function($event, inter) {\n        console.log('contactclick')\n        _this.contextMenu.setPosition($event.pageX, $event.pageY)\n        edisonAPI.artisan.get(inter.id)\n            .then(function(resp) {\n                _this.contextMenu.setData(resp.data);\n                _this.contextMenu.open();\n            })\n    }\n\n    _this.rowClick = function($event, inter) {\n        if (_this.contextMenu.active)\n            return _this.contextMenu.close();\n        if ($event.metaKey || $event.ctrlKey) {\n            tabContainer.addTab('/artisan/' + inter.id, {\n                title: ('#' + inter.id),\n                setFocus: false,\n                allowDuplicates: false\n            });\n        } else {\n            if ($rootScope.expendedRow === inter.id) {\n                return 0;\n            } else {\n                $rootScope.expendedRow = inter.id\n                _this.loadPanel(inter.id)\n                $location.search('id', inter.id);\n            }\n        }\n    }\n\n\n    $scope.$watchCollection('[selectedIndex, expendedRow]', function(current, prev) {\n        if (prev[1] && $scope.selectedIndex == 4) {\n            $scope.compteTiers = undefined\n            edisonAPI.artisan.getCompteTiers($rootScope.expendedRow).success(function(resp) {\n                $scope.compteTiers = resp;\n            })\n        }\n    })\n    $scope.$watch('selectedIndex', function(current, prev) {\n        if (current !== void(0) && prev !== current)Â  {\n            $('md-tabs-content-wrapper').hide()\n            $timeout(function() {\n                $('md-tabs-content-wrapper').show()\n            }, 500)\n        }\n    })\n\n}\nangular.module('edison').controller('ContactArtisanController', ContactArtisanController);\n","var DashboardController = function(edisonAPI, tabContainer, $routeParams, $location, LxProgressService) {\n    var tab = tabContainer.getCurrentTab();\n    tab.setTitle('Dashboard')\n    var _this = this;\n    //LxProgressService.circular.show('#5fa2db', '#globalProgress');\n\n    _this.openLink = function(link) {\n        $location.url(link)\n    }\n}\n\nangular.module('edison').controller('DashboardController', DashboardController);\n\n",""," angular.module('edison').directive('edisonMap', ['$window', 'Map', 'mapAutocomplete', 'Address',\n     function($window, Map, mapAutocomplete, Address) {\n         \"use strict\";\n         return {\n             replace: true,\n             restrict: 'E',\n             templateUrl: '/Templates/autocomplete-map.html',\n             scope: {\n                 data: \"=\",\n                 client: \"=\",\n                 height: \"@\",\n                 xmarkers: \"=\",\n                 addressChange: '&',\n                 isNew: \"=\",\n                 firstAddress: \"=\"\n             },\n             link: function(scope, element, attrs) {\n                 scope._height = scope.height || 315;\n                 scope.map = new Map();\n                 scope.map.setZoom(_.get(scope, 'client.address') ? 12 : 6)\n                 if (scope.isNew) {\n                     scope.map.show()\n                 }\n                 scope.autocomplete = mapAutocomplete;\n\n                 scope.mapShow = function() {\n                     scope.mapDisplay = true\n                 }\n\n                 if (_.get(scope, 'client.address')) {\n                     scope.client.address = Address(scope.client.address, true); //true -> copyContructor\n                     scope.map.setCenter(scope.client.address);\n                 } else {\n                     scope.map.setCenter(Address({\n                         lat: 46.3333,\n                         lng: 2.6\n                     }));\n                 }\n\n                 scope.changeAddress = function(place) {\n                     scope.firstAddress = true;\n                     mapAutocomplete.getPlaceAddress(place).then(function(addr) {\n                         scope.map.setZoom(12);\n                         scope.map.setCenter(addr)\n                         scope.client.address = addr;\n                         scope.addressChange({\n                             test: 123\n                         });\n                     });\n                 }\n\n                 scope.getStaticMap = function() {\n                     if (!_.get(scope, 'data.client.address.lt'))\n                         return 0\n                     var q = \"?width=\" + Math.round($window.outerWidth * (scope.height === \"small\" ? 0.8 : 1.2));\n                     if (scope.client && scope.client.address && scope.client.address.latLng)\n                         q += (\"&origin=\" + scope.client.address.latLng);\n                     if (scope.data.artisan && scope.data.artisan.address)\n                         q += (\"&destination=\" + scope.data.artisan.address.lt + \",\" + scope.data.artisan.address.lg);\n                     return \"/api/mapGetStatic\" + q;\n                 }\n                 scope.showClientMarker = function() {\n                     return scope.client.address && scope.client.address.latLng;\n                 }\n                 scope.clickOnArtisanMarker = function(event, sst) {\n                     scope.data.sst = sst.id;\n                 }\n             }\n         }\n     }\n ]);\n"," angular.module('edison').directive('creditCard', ['config', function(config) {\n     \"use strict\";\n     return {\n         replace: true,\n         restrict: 'E',\n         templateUrl: '/Templates/credit-card.html',\n         scope: {\n             model: \"=\",\n         },\n         link: function(scope, element, attrs) {\n             scope.config = config\n         },\n     }\n\n }]);\n","var DevisCtrl = function(edisonAPI, $scope, $rootScope, $location, $routeParams, LxProgressService, LxNotificationService, tabContainer, config, dialog, devisPrm, Devis) {\n    \"use strict\";\n    var _this = this;\n    _this.config = config;\n    _this.dialog = dialog;\n    _this.moment = moment;\n    var tab = tabContainer.getCurrentTab();\n    if (!tab.data) {\n        var devis = new Devis(devisPrm.data)\n        tab.setData(devis);\n        if ($routeParams.id.length > 12) {\n            _this.isNew = true;\n            devis.tmpID = $routeParams.id;\n            tab.setTitle('DEVIS ' + moment((new Date(parseInt(devis.tmpID))).toISOString()).format(\"HH:mm\").toString());\n        } else {\n            tab.setTitle('DEVIS ' + $routeParams.id);\n            if (!devis) {\n                LxNotificationService.error(\"Impossible de trouver les informations !\");\n                $location.url(\"/dashboard\");\n                tabContainer.remove(tab);\n                return 0;\n            }\n        }\n    } else {\n        var devis = tab.data;\n    }\n    _this.data = tab.data;\n\n    var closeTab = function(err) {\n        console.log('=========>', err)\n        if (!err)\n            tabContainer.close(tab);\n    }\n\n    _this.saveDevis = function(options) {\n        devis.save(function(err, resp) {\n            console.log('-->', 'saved')\n            if (err) {\n                return false;\n            } else if (options.envoi) {\n                Devis(resp).sendDevis(closeTab);\n            } else if (options.annulation) {\n                Devis(resp).annulation(closeTab);\n            } else if (options.transfert) {\n                Devis(resp).transfert()\n            } else {\n                closeTab();\n            }\n        })\n    }\n    $scope.$watch(function() {\n        return devis.client.civilite\n    }, function(newVal, oldVal) {\n        if (oldVal !== newVal)\n            devis.tva = 20;\n    })\n\n\n    var updateTmpDevis = _.after(5, _.throttle(function() {\n        edisonAPI.devis.saveTmp(devis);\n    }, 2000))\n\n    if (!devis.id) {\n        $scope.$watch(function() {\n            return devis;\n        }, updateTmpDevis, true)\n    }\n\n}\nangular.module('edison').controller('DevisController', DevisCtrl);\n"," angular.module('edison').directive('infoCategorie', ['config', function(config) {\n     \"use strict\";\n     return {\n         replace: true,\n         restrict: 'E',\n         templateUrl: '/Templates/info-categorie.html',\n         transclude: true,\n         scope: {\n             model: \"=\",\n             change: '&'\n         },\n         link: function(scope, element, attrs) {\n             scope.config = config\n             scope.callback = function(newCategorie) {\n                 scope.model = newCategorie;\n                 if (typeof scope.change === 'function')Â  {\n                     scope.change({\n                         newCategorie: newCategorie\n                     })\n                 }\n             }\n         },\n     }\n\n }]);\n"," angular.module('edison').directive('infoClient', ['config', 'edisonAPI', function(config, edisonAPI) {\n     \"use strict\";\n     return {\n         replace: true,\n         restrict: 'E',\n         templateUrl: '/Templates/info-client.html',\n         transclude: true,\n         scope: {\n             client: '=model',\n             noDetails:'@'\n         },\n         link: function(scope, element, attrs) {\n             scope.config = config;\n             scope.searchPhone = function(tel) {\n                 if (tel.length > 2) {\n                     edisonAPI.searchPhone(tel)\n                         .success(function(tel) {\n                             scope.searchedPhone = tel\n                         }).catch(function() {\n                             scope.searchedPhone = {};\n                         })\n                 }\n             }\n         }\n     }\n\n }]);\n","angular.module('edison').directive('infoCompta', ['config', 'Paiement',\n    function(config, Paiement) {\n        \"use strict\";\n        return {\n            restrict: 'E',\n            templateUrl: '/Templates/info-compta.html',\n            scope: {\n                data: \"=\",\n            },\n            link: function(scope, element, attrs) {\n                scope.config = config\n                var reglement = scope.data.compta.reglement\n                var paiement = scope.data.compta.paiement\n                if (!scope.data.tva) {\n                    scope.data.tva = (scope.data.client.civilite == 'Soc.' ? 20 : 10)\n                }\n                if (!paiement.mode) {\n                    console.log('-->', scope.data.artisan)\n                    paiement.mode = _.get(scope.data.artisan, 'document.rib.file') ? \"VIR\" : \"CHQ\"\n                }\n                console.log('==<', paiement.mode)\n                scope.compta = new Paiement(scope.data)\n                reglement.montantTTC = scope.compta.getMontantTTC()\n\n                scope.$watchGroup(['data.compta.reglement.montantTTC',\n                    'data.compta.reglement.avoir',\n                    'data.tva'\n                ], function(current, prev) {\n                    var montant = reglement.montantTTC || 0\n                    var coeff = 100 * (100 / (100 + scope.data.tva));\n                    reglement.montant = Paiement().applyCoeff(reglement.montantTTC, coeff)\n                    if (!paiement.base) {\n                        paiement.base = _.round(reglement.montant - (reglement.avoir || Â 0), 2)\n                    }\n                })\n\n                scope.$watchGroup(['data.compta.reglement.montant',\n                    'data.compta.paiement.base',\n                    'data.compta.paiement.tva',\n                    'data.compta.paiement.pourcentage.deplacement',\n                    'data.compta.paiement.pourcentage.fourniture',\n                    'data.compta.paiement.pourcentage.maindOeuvre'\n                ], function(newValues, oldValues, scope) {\n                    if (!_.isEqual(newValues, oldValues)) {\n                        scope.compta = new Paiement(scope.data)\n                        paiement.montant = scope.compta.montantTotal\n                    }\n                }, true);\n            },\n        }\n\n    }\n]);\n","var InterventionCtrl = function(Description, Signalement, ContextMenu, $window, $timeout, $rootScope, $scope, $location, $routeParams, dialog, fourniture, LxNotificationService, LxProgressService, tabContainer, edisonAPI, Address, $q, mapAutocomplete, productsList, config, interventionPrm, Intervention, Map) {\n    \"use strict\";\n    var _this = this;\n    _this.config = config;\n    _this.dialog = dialog;\n    _this.autocomplete = mapAutocomplete;\n    var tab = tabContainer.getCurrentTab();\n    if (!tab.data) {\n        var intervention = new Intervention(interventionPrm.data)\n\n        intervention.sst = intervention.artisan ? intervention.artisan.id : 0;\n        tab.setData(intervention);\n        if ($routeParams.id.length > 12) {\n            _this.isNew = true;\n            intervention.tmpID = $routeParams.id;\n            tab.setTitle('#' + moment((new Date(parseInt(intervention.tmpID))).toISOString()).format(\"HH:mm\").toString());\n        } else {\n            tab.setTitle('#' + $routeParams.id);\n            if (!intervention) {\n                LxNotificationService.error(\"Impossible de trouver les informations !\");\n                $location.url(\"/dashboard\");\n                tabContainer.remove(tab);\n                return 0;\n            }\n        }\n    } else {\n        var intervention = tab.data;\n    }\n    if ($routeParams.d) {\n        intervention.devisOrigine = parseInt($routeParams.d)\n        intervention.date = {\n            ajout: new Date(),\n            intervention: new Date(),\n\n        }\n        intervention.reglementSurPlace = true;\n        intervention.modeReglement = 'CH';\n        intervention.remarque = 'PAS DE REMARQUES';\n    }\n    _this.data = tab.data;\n    _this.description = new Description(intervention);\n    _this.signalement = new Signalement(intervention)\n    _this.contextMenu = new ContextMenu('intervention')\n    _this.contextMenu.setData(intervention);\n    _this.rowRightClick = function($event, inter) {\n        _this.contextMenu.setPosition($event.pageX, $event.pageY)\n        _this.contextMenu.open();\n    }\n\n\n    $scope.changeArtisan = function(sav) {\n        sav.artisan = _.find(_this.artisans, function(e) {\n            return e.id === sav.sst;\n        })\n    }\n\n    $scope.calculPrixFinal = function() {\n        intervention.prixFinal = 0;\n        _.each(intervention.produits, function(e)Â  {\n            intervention.prixFinal += (e.pu * e.quantite)\n        })\n        intervention.prixFinal = Math.round(intervention.prixFinal * 100) / 100;\n    }\n\n    $scope.addSAV = function() {\n        dialog.getText({\n            title: \"Description du SAV\",\n            text: \"\"\n        }, function(resp) {\n            if (!intervention.sav)\n                intervention.sav = [];\n            intervention.sav.push({\n                date: new Date(),\n                login: $rootScope.user.login,\n                description: resp,\n                regle: false\n            })\n        })\n    }\n\n\n    $scope.addLitige = function() {\n        dialog.getText({\n            title: \"Description du Litige\",\n            text: \"\"\n        }, function(resp) {\n            if (!intervention.litiges)\n                intervention.litiges = [];\n            intervention.litiges.push({\n                date: new Date(),\n                login: $rootScope.user.login,\n                description: resp,\n                regle: false\n            })\n        })\n    }\n\n\n    $scope.recapArtisan = function(sst) {\n        edisonAPI.artisan.lastInters(sst.id)\n            .success(dialog.recap);\n    }\n\n    $scope.smsArtisan = function() {\n        intervention.smsArtisan(function(err, resp) {\n            if (!err)\n                intervention.artisan.sms.unshift(resp)\n        })\n    }\n\n    $scope.callArtisan = function() {\n        intervention.callArtisan(function(err, resp) {\n            if (!err)\n                intervention.artisan.calls.unshift(resp)\n        })\n    }\n\n\n    $scope.addProductSupp = function(prod) {\n        $scope.produitsSupp.add(prod);\n        $scope.searchProd = \"\";\n    }\n\n\n    $scope.addProduct = function(prod) {\n        $scope.produits.add(prod);\n        $scope.searchProd = \"\";\n    }\n\n    $scope.clickTrigger = function(elem) {\n        angular.element(elem).trigger('click');\n    }\n\n    $scope.addComment = function() {\n        intervention.comments.push({\n            login: $rootScope.user.login,\n            text: $scope.commentText,\n            date: new Date()\n        })\n        $scope.commentText = \"\";\n    }\n\n    $scope.onFileUpload = function(file) {\n        intervention.fileUpload(file, function(err, resp) {\n            $scope.fileUploadText = \"\";\n            $scope.loadFilesList();\n        });\n    }\n    $scope.loadFilesList = function() {\n        edisonAPI.intervention.getFiles(intervention.id || intervention.tmpID).then(function(result) {\n            intervention.files = result.data;\n        }, console.log)\n    }\n    $scope.loadFilesList();\n\n\n\n    var postSave = function(options, resp, cb) {\n        if (options && options.envoiFacture && options.verification) {\n            intervention.envoiFactureVerif(cb)\n        } else if (options && options.envoi === true) {\n            resp.files = intervention.files;\n            intervention.envoi.bind(resp)(cb);\n        } else if (options && options.annulation) {\n            intervention.annulation(cb);\n        } else if (options && options.verification) {\n            intervention.verificationSimple(cb);\n        } else {\n            cb(null)\n        }\n    }\n\n    var saveInter = function(options) {\n        $scope.saveInter = function() {\n            console.log('noope')\n        }\n        intervention.save(function(err, resp) {\n            if (!err) {\n                postSave(options, resp, function(err) {\n                    if (!err) {\n                        tabContainer.close(tab);\n                    }\n                    $scope.saveInter = saveInter;\n                })\n            }\n        })\n    }\n\n    $scope.saveInter = saveInter;\n\n    $scope.clickOnArtisanMarker = function(event, sst) {\n        intervention.sst = sst.id;\n    }\n\n    _this.searchArtisans = function(categorie) {\n        if (_.get(intervention, 'client.address.lt')) {\n            edisonAPI.artisan.getNearest(intervention.client.address, categorie || intervention.categorie)\n                .success(function(result) {\n                    _this.nearestArtisans = result;\n                });\n        }\n    }\n    _this.searchArtisans();\n\n    $scope.$watch(function() {\n        return intervention.client.civilite\n    }, function(newVal, oldVal) {\n        if (oldVal !== newVal) {\n            intervention.tva = (newVal == 'Soc.' ? 20 : 10);\n        }\n    })\n\n    $scope.$watch(function() {\n        return intervention.sst;\n    }, function(id_sst) {\n        if (id_sst) {\n            $q.all([\n                edisonAPI.artisan.get(id_sst, {\n                    cache: false\n                }),\n                edisonAPI.artisan.getStats(id_sst, {\n                    cache: true\n                }),\n                edisonAPI.call.get(intervention.id || intervention.tmpID, id_sst),\n                edisonAPI.sms.get(intervention.id || intervention.tmpID, id_sst)\n            ]).then(function(result) {\n                intervention.artisan = result[0].data;\n                intervention.artisan.stats = result[1].data;\n                intervention.artisan.calls = result[2].data;\n                intervention.artisan.sms = result[3].data;\n                if (result[0].data.address) {\n                    edisonAPI.getDistance({\n                            origin: result[0].data.address.lt + \", \" + result[0].data.address.lg,\n                            destination: intervention.client.address.lt + \", \" + intervention.client.address.lg\n                        })\n                        .then(function(result) {\n                            intervention.artisan.stats.direction = result.data;\n                        })\n                }\n            });\n        }\n    })\n\n\n    var updateTmpIntervention = _.after(5, _.throttle(function() {\n        edisonAPI.intervention.saveTmp(intervention);\n\n    }, 2000))\n\n    if (!intervention.id) {\n        $scope.$watch(function() {\n            return intervention;\n        }, updateTmpIntervention, true)\n    }\n\n    $scope.smoothTransition = function(value) {\n        if (!$scope.displaySAV) {\n            $scope.savStyle = {\n                height: '0',\n                overflow: 'hidden',\n            }\n            $scope.displaySAV = true\n            $timeout(function() {\n                $(\"#SAV\").velocity({\n                    height: $(\"#SAV>div\").height(),\n                }, 200, function() {\n                    delete $scope.savStyle.height\n                });\n            }, 10)\n        } else {\n            $(\"#SAV\").velocity({\n                height: 0,\n            }, 200, function() {\n                $scope.displaySAV = false\n            });\n        }\n    }\n\n    $scope.sstAbsence = function(id) {\n        if (id) {\n            intervention.absenceArtisan(_this.searchArtisans);\n        }\n    }\n}\n\nangular.module('edison').controller('InterventionController', InterventionCtrl);\n"," angular.module('edison').directive('produits',\n     function(config, productsList, dialog, openPost, Intervention, Devis) {\n         \"use strict\";\n         return {\n             restrict: 'E',\n             templateUrl: '/Templates/produits.html',\n             scope: {\n                 data: \"=\",\n                 tva: '=',\n                 display: '@',\n                 model: \"@\"\n             },\n             link: function(scope, element, attrs) {\n                 var model = scope.data;\n                 scope.config = config\n                 model.produits = model.produits || [];\n                 scope.config = config;\n                 scope.produits = new productsList(model.produits);\n                 scope.Intervention = Intervention;\n                 scope.Devis = Devis;\n\n                 if (!scope.data.reglementSurPlace) {\n                     scope.display = true;\n                 }\n\n                 scope.$watch('data.produits', function(curr, prev) {\n                     if (!_.isEqual(curr, prev)) {\n                         scope.data.prixFinal = scope.produits.total()\n                     }\n                 }, true)\n\n                 scope.createProd = function() {\n/*                     scope.produits.add({\n                         ref: 'EDIXX',\n                         desc: \"\",\n                         pu: 10,\n                         quantite: 1,\n                         focus: true,\n                     })*/\n                     dialog.addProd(function(resp) {\n                         model.produits.push(resp)\n                     });\n                 }\n                 scope.printDevis = function() {\n                     openPost('/api/intervention/printDevis', {\n                         data: JSON.stringify(scope.data),\n                         html: true\n                     })\n                 }\n\n                 scope.printFactureAcquitte = function() {\n                     openPost('/api/intervention/printFactureAcquitte', {\n                         data: JSON.stringify(scope.data),\n                         html: true\n                     })\n                 }\n             },\n         }\n\n     }\n );\n","var LpaController = function(openPost, $window, tabContainer, edisonAPI, $rootScope, LxProgressService, LxNotificationService, FlushList) {\n    \"use strict\";\n    var _this = this\n    var tab = tabContainer.getCurrentTab();\n    tab.setTitle('LPA')\n    _this.loadData = function(prevChecked) {\n        LxProgressService.circular.show('#5fa2db', '#globalProgress');\n        edisonAPI.compta.lpa().then(function(result) {\n            _.each(result.data, function(sst) {\n                sst.list = new FlushList(sst.list, prevChecked);\n                _this.reloadList(sst)\n            })\n            $rootScope.lpa = result.data\n            LxProgressService.circular.hide()\n        })\n    }\n    if (!$rootScope.lpa)\n        _this.loadData()\n    _this.checkArtisan = function(sst) {\n        sst.checked = !sst.checked\n        _.each(sst.list.getList(), function(e) {\n            e.checked = sst.checked;\n        })\n    }\n    _this.updateNumeroCheque = function(index) {\n        var base = $rootScope.lpa[index].numeroCheque;\n        if (base) {\n            for (var i = index; i < $rootScope.lpa.length; i++) {\n                $rootScope.lpa[i].numeroCheque = ++base\n            };\n        }\n    }\n    _this.flush = function() {\n        var rtn = [];\n        _.each($rootScope.lpa, function(sst) {\n            _.each(sst.list.getList(), function(e) {\n                if (e.checked) {\n                    e.numeroCheque = sst.numeroCheque\n                    rtn.push(e);\n                }\n            })\n        })\n        edisonAPI.compta.flush(rtn).then(function(resp) {\n            LxNotificationService.success(resp.data);\n            _this.reloadLPA()\n        }).catch(function(err) {\n            LxNotificationService.error(err.data);\n        })\n    }\n    _this.reloadList = function(artisan) {\n        artisan.total = artisan.list.getTotal()\n        artisan.total = artisan.list.getTotal(true)\n        artisan.total = artisan.list.getTotal()\n    }\n    _this.reloadLPA = function() {\n        var rtn = [];\n        _.each($rootScope.lpa, function(sst) {\n            _.each(sst.list.getList(), function(e) {\n                if (e.checked) {\n                    rtn.push(e.id);\n                }\n            })\n        })\n        _this.loadData(rtn)\n    }\n\n    _this.print = function(type) {\n        openPost('/api/intervention/print', {\n            type: type,\n            data: $rootScope.lpa\n        });\n    }\n}\n\n\nangular.module('edison').controller('LpaController', LpaController);\n","var ArtisanController = function($timeout, tabContainer, LxProgressService, FiltersFactory, ContextMenu, edisonAPI, DataProvider, $routeParams, $location, $q, $rootScope, $filter, config, ngTableParams) {\n    \"use strict\";\n    var _this = this;\n    var dataProvider = new DataProvider('artisan');\n    var filtersFactory = new FiltersFactory('artisan')\n    var currentFilter;\n    if ($routeParams.fltr) {\n        currentFilter = filtersFactory.getFilterByUrl($routeParams.fltr)\n    }\n    var currentHash = $location.hash();\n    var title = currentFilter ? currentFilter.long_name : \"Artisan\";\n\n    LxProgressService.circular.show('#5fa2db', '#globalProgress');\n    dataProvider.init(function(err, resp) {\n\n        _this.tab = tabContainer.getCurrentTab();\n        _this.tab.setTitle(title, currentHash);\n        _this.tab.hash = currentHash;\n        _this.config = config;\n        _this.moment = moment;\n        if (!dataProvider.isInit()) {\n            dataProvider.setData(resp);\n        }\n        dataProvider.applyFilter(currentFilter, _this.tab.hash);\n        var tableParameters = {\n            page: 1, // show first page\n            total: dataProvider.filteredData.length,\n            filter: {},\n            sorting: {\n                id: 'desc'\n            },\n            count: 100 // count per page\n        };\n        var tableSettings = {\n            //groupBy:$rootScope.config.selectedGrouping,\n            total: dataProvider.filteredData,\n            getData: function($defer, params) {\n                var data = dataProvider.filteredData;\n                data = $filter('tableFilter')(data, params.filter());\n                params.total(data.length);\n                data = $filter('orderBy')(data, params.orderBy());\n                $defer.resolve(data.slice((params.page() - 1) * params.count(), params.page() * params.count()));\n            },\n            filterDelay: 100\n        }\n        _this.tableParams = new ngTableParams(tableParameters, tableSettings);\n        LxProgressService.circular.hide();\n    });\n\n    $rootScope.$on('ARTISAN_CACHE_LIST_CHANGE', function() {\n        if (_this.tab.fullUrl === tabContainer.getCurrentTab().fullUrl) {\n            dataProvider.applyFilter(currentFilter, _this.tab.hash);\n            _this.tableParams.reload();\n        }\n    })\n\n    _this.contextMenu = new ContextMenu('artisan')\n\n    _this.rowRightClick = function($event, inter) {\n        _this.contextMenu.setPosition($event.pageX, $event.pageY)\n        edisonAPI.artisan.get(inter.id)\n            .then(function(resp) {\n                _this.contextMenu.setData(resp.data);\n                _this.contextMenu.open();\n            })\n    }\n\n    _this.rowClick = function($event, inter) {\n        if (_this.contextMenu.active)\n            return _this.contextMenu.close();\n        if ($event.metaKey || $event.ctrlKey) {\n            tabContainer.addTab('/artisan/' + inter.id, {\n                title: ('#' + inter.id),\n                setFocus: false,\n                allowDuplicates: false\n            });\n        } else {\n            if ($rootScope.expendedRow === inter.id) {\n                $rootScope.expendedRow = undefined;\n            } else {\n                $rootScope.expendedRow = inter.id\n            }\n        }\n    }\n\n}\nangular.module('edison').controller('ListeArtisanController', ArtisanController);\n","var DevisController = function($timeout, tabContainer, FiltersFactory, ContextMenu, edisonAPI, DataProvider, $routeParams, $location, $q, $rootScope, $filter, config, ngTableParams, LxProgressService) {\n    \"use strict\";\n    var _this = this;\n    var dataProvider = new DataProvider('devis');\n    var filtersFactory = new FiltersFactory('devis')\n    var currentFilter;\n    if ($routeParams.fltr) {\n        currentFilter = filtersFactory.getFilterByUrl($routeParams.fltr)\n    }\n    var currentHash = $location.hash();\n    var title = currentFilter ? currentFilter.long_name : \"Devis\";\n\n    LxProgressService.circular.show('#5fa2db', '#globalProgress');\n    dataProvider.init(function(err, resp) {\n        _this.tab = tabContainer.getCurrentTab();\n        _this.recap = $routeParams.artisanID;\n        _this.tab.setTitle(title, currentHash);\n        _this.tab.hash = currentHash;\n        _this.config = config;\n        _this.moment = moment;\n        dataProvider.applyFilter(currentFilter, _this.tab.hash);\n        var tableParameters = {\n            page: 1, // show first page\n            total: dataProvider.filteredData.length,\n            filter: {},\n            sorting: {\n                id: 'desc'\n            },\n            count: 100 // count per page\n        };\n        var tableSettings = {\n            //groupBy:$rootScope.config.selectedGrouping,\n            total: dataProvider.filteredData,\n            getData: function($defer, params) {\n                var data = dataProvider.filteredData;\n                data = $filter('tableFilter')(data, params.filter());\n                params.total(data.length);\n                data = $filter('orderBy')(data, params.orderBy());\n                $defer.resolve(data.slice((params.page() - 1) * params.count(), params.page() * params.count()));\n            },\n            filterDelay: 100\n        }\n        _this.tableParams = new ngTableParams(tableParameters, tableSettings);\n        LxProgressService.circular.hide();\n    });\n\n    $rootScope.$on('DEVIS_CACHE_LIST_CHANGE', function() {\n        if (_this.tab.fullUrl === tabContainer.getCurrentTab().fullUrl) {\n            dataProvider.applyFilter(currentFilter, _this.tab.hash);\n            _this.tableParams.reload();\n        }\n    })\n\n    _this.contextMenu = new ContextMenu('devis')\n\n    _this.rowRightClick = function($event, inter) {\n        console.log('yay');\n        \n        _this.contextMenu.setPosition($event.pageX, $event.pageY)\n        _this.contextMenu.setData(inter);\n        _this.contextMenu.open();\n        edisonAPI.devis.get(inter.id)\n            .then(function(resp) {\n                _this.contextMenu.setData(resp.data);\n            })\n    }\n\n    _this.rowClick = function($event, inter) {\n        if (_this.contextMenu.active)\n            return _this.contextMenu.close();\n        if ($event.metaKey || $event.ctrlKey) {\n            tabContainer.addTab('/devis/' + inter.id, {\n                title: ('#' + inter.id),\n                setFocus: false,\n                allowDuplicates: false\n            });\n        } else {\n            if ($rootScope.expendedRow === inter.id) {\n                $rootScope.expendedRow = undefined;\n            } else {\n                $rootScope.expendedRow = inter.id\n            }\n        }\n    }\n\n}\nangular.module('edison').controller('ListeDevisController', DevisController);\n","angular.module('edison').controller('InterventionsController', _.noop);\n","var SearchController = function(edisonAPI, tabContainer, $routeParams, $location, LxProgressService) {\n    var tab = tabContainer.getCurrentTab();\n    tab.setTitle('Search')\n    var _this = this;\n    LxProgressService.circular.show('#5fa2db', '#globalProgress');\n    edisonAPI.searchText($routeParams.query).success(function(resp) {\n        LxProgressService.circular.hide()\n        _this.data = resp\n    })\n    _this.openLink = function(link) {\n        $location.url(link)\n    }\n}\n\nangular.module('edison').controller('SearchController', SearchController);\n"],"sourceRoot":"/source/"}