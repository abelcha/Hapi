<div id="expended" ng-style="expendedStyle">
    <div class="row">
        <div class="col-sm-4 info-ext" ng-if="_model === 'intervention'||_model === 'devis'">
            <p bold text-xxl underlined>Coordonées client</p>
            <p>{{client.civilite}} {{client.prenom}} {{client.nom}}</p>
            <p>{{client.address.n}} {{client.address.r}}, </p>
            <p>{{client.address.cp}} {{client.address.v}}</p>
            <p ng-if="_model === 'intervention'" strong>{{data.description}}</p>
            <p ng-if="_model === 'intervention'"><span strong>{{data.prixAnnonce || 0}} €<span ng-if="data.prixFinal"> -> {{data.prixFinal}} € </span></span>
                ({{data.reglementSurPlace ? 'Reglement sur place' : ' Reglement par facture'}} - {{data.modeReglement}})
                <p ng-if="_model === 'intervention'">
                </p>
                <p ng-if="!data.reglementSurPlace" bold text-xxl underlined>Coordonées Facturation</p>
                <div ng-if="!data.reglementSurPlace && data.facture.nom && data.facture.address.r">
                    <p> {{data.facture.prenom}} {{data.facture.nom}}</p>
                    <p>{{data.facture.address.n}} {{data.facture.address.r}}, {{data.facture.address.cp}} {{data.facture.address.v}}</p>
                </div>
                <div ng-if="_model === 'intervention' && !data.reglementSurPlace && !data.facture.nom && !data.facture.r ">
                    <p>FACTURE À FAIRE</p>
                </div>
                <p ng-if="_model === 'devis'">
                    {{produits.flagship().title}} ({{produits.flagship().pu}} €)
                </p>
                <p ng-if="_model === 'devis'">
                    {{data.produits.length}} Produits ( {{::produits.total()}} €)
                </p>
           <!--      <p ng-if="_model === 'intervention' && data.status === 'ANN' && data.ca "strong>Annulation:</strong> {{data.ca.long_name}}</p> -->
        </div>
        <div ng-if="_model === 'intervention'" class="col-sm-4 info-ext">
            <div style="min-height: 147px;padding-top:3px">
            <p bold text-xxl underlined>Historique</p>

                <p ng-if="data.devisOrigine.id">Devis <a href="/devis/{{data.devisOrigine.id}}">{{data.devisOrigine.id}}</a> ajouté le {{data.devisOrigine.date.ajout | date:"dd/MM/yy à HH'h'mm"}} par {{data.devisOrigine.login.ajout}}
                </p>
                <p>Ajouté le {{data.date.ajout | date:"dd/MM/yy à HH'h'mm"}} par {{data.login.ajout}}</p>
                <p ng-if="data.date.envoi">Envoyé le {{data.date.envoi | date:"dd/MM/yy à HH'h'mm"}} par {{data.login.envoi}}</p>
                <p ng-if="data.date.intervention">Intervention le {{data.date.intervention | date:"dd/MM/yy à HH'h'mm"}} par <a href="/artisan/{{data.sst.id}}/recap">{{data.sst.nomSociete}}</a></p>
                <p ng-if="data.date.verification">Verifié le {{data.date.verification | date:"dd/MM/yy à HH'h'mm"}} par {{data.login.verification || 'inconnu'}}</p>
                <p ng-if="data.compta.reglement.recu">Réglement encaissé le {{data.date.envoi | date:"dd/MM/yy à HH'h'mm"}} par {{data.compta.reglement.login}}</p>
                <p ng-if="data.compta.paiement.effectue">Paiement éffectué le {{data.compta.paiement.date | date:"dd/MM/yy à HH'h'mm"}} par {{data.compta.paiement.login}}</p>
                <p ng-if="data.status === 'ANN' && data.date.annulation">Annulé le {{data.date.annulation | date:"dd/MM/yy à HH'h'mm"}} par {{data.login.annulation}} <i ng-if="data.causeAnnulation">({{config.getCauseAnnulation(data.causeAnnulation).long_name}})</i></p>
            </div>
        </div>
        <div ng-if="_model === 'devis'" class="col-sm-4 info-ext">
            <div ng-init="hist_title = ['Ajouté', '1er Envoi', 'Relance n°1', 'Relance n°2']">
                <!--  <pre>
                  {{data.produits}}
                </pre> -->
                <p>
                    <strong> {{hist_title[0]}} </strong> le {{data.date.ajout|date:"dd/MM/yy à HH'h'mm"}} par {{data.login.ajout}}
                </p>
                <p ng-if="hist.length >= 1">
                    <strong> {{hist_title[1]}} </strong> le {{hist[0].date|date:"dd/MM/yy à HH'h'mm"}} par {{hist[0].login}}
                </p>
                <p ng-if="hist.length >= 2">
                    <strong> {{hist_title[2]}} </strong> le {{hist[1].date|date:"dd/MM/yy à HH'h'mm"}} par {{hist[1].login}}
                </p>
                <p ng-if="hist.length >= 3">
                    <strong> {{hist_title[3]}} </strong> le {{hist[2].date|date:"dd/MM/yy à HH'h'mm"}} par {{hist[2].login}}
                </p>
            </div>
        </div>
        <div ng-if="_model === 'artisan'" class="col-sm-4 info-ext">
            <div>
                <h4>Artisan</h4>
                <br>
                <p>
                    <strong> Date d'ajout : </strong> {{artisan.date.ajout | date:"MM/dd/yyyy 'à' hh'h'mm"}}
                </p>
            </div>
        </div>
        <div class="col-sm-4 hidden-sm hidden-xs hidden-md" ng-if="address && address.lt">
            <img style="height: auto;width: 411px;" ng-src="{{getStaticMap()}}" class="img-thumbnail" />
        </div>
    </div>
</div>
