<!DOCTYPE html>
<html ng-app="JsonViewApp">
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">   

  <link id="BootstrapDefaultTheme" rel="stylesheet" href="/bootswatch/sandstone/bootstrap.css">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="/ng-prettyjson/dist/ng-prettyjson.min.css">
  <style type="text/css">
  </style>
  </head>
  <body ng-controller="JsonController as Ctrl" >
  <div class="container">
    <div class="row">
       <p ng-bind-html="err.status | unsafe"></p>
      <p ng-bind-html="err.data | unsafe"></p>
    </div>  
    <div class="row">
        <pre pretty-json="tab.data"  />
    </div>  
  </div>

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.8/angular.min.js"></script>
    <script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/ng-prettyjson/dist/ng-prettyjson.min.js"></script>
  </body>
  <script type="text/javascript">
    var app = angular.module('JsonViewApp', ['ngPrettyJson']);

     app.controller('JsonController', function($scope, $http) {
      $scope.tab = {};
      $scope.err = {};

      console.time("concatenation");
        $http.get('/data/' + '<%= q  %>' ).success(function(data, status) {
          $scope.tab.data = data;
          $scope.tab.status = status;
          console.timeEnd("concatenation");
        }).error(function(data, status) {
          $scope.err.data = data;
          $scope.err.status = status;
        });
     });
     app.filter('unsafe', function($sce) {
    return function(val) {
        return $sce.trustAsHtml(val);
    };
});

</script>
</html>