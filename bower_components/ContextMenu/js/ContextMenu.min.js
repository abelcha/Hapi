!function(e){var t={},n={init:function(t,i){var o;o=n.guid();var d=e('<div class="dropdown clearfix bootstrap-contextmenu"></div>');d.css({display:"none",position:"absolute"}).attr({id:o}).appendTo("body"),e(t).data("e_id",o),mc=e(t).data("mc"),void 0==mc&&(mc=3),e(t).data("e",e.extend(!0,{},i)),e(t).css("-moz-user-select","none"),e(t).css("-khtml-user-select","none"),e(t).css("user-select","none"),n.buildElements(t,d,i,!0),n.create(t,mc)},buildElements:function(t,i,o,d){var a=e('<ul aria-labelledby="dropdownMenu" role="menu" class="dropdown-menu"></ul>');d=void 0!=d?d:!0,1==d&&a.show();for(var r in o){var s=e("<li></li>");switch(s.attr({id:r}),typeof o[r]){case"object":if(void 0!=o[r].text)if("---"==o[r].text)s.addClass("divider");else{var c=e('<a href="#" tabindex="-1"></a>');"string"==typeof o[r].icon?s.append(c.append(' <i class="'+o[r].icon+'"></i> ').append(o[r].text)):(c=e('<a href="#" tabindex="-1">'+o[r].text+"</a>"),s.append(c)),"function"==typeof o[r].click&&c.bind("mousedown",{key:r,target:t,callback:o[r].click},function(t){e(this).parent().hasClass("disabled")||t.data.callback(t.data.target,e(this).parent())}),void 0!=o[r].disabled&&1==o[r].disabled&&s.addClass("disabled"),"object"==typeof o[r].children&&(s.hasClass("disabled")||(s.addClass("dropdown-submenu"),n.buildElements(t,s,o[r].children,!1))),s.hasClass("disabled")&&s.children("a").children("i").hide()}break;case"string":"---"==o[r]?s.addClass("divider"):s.append(e('<a href="#" tabindex="-1">'+o[r]+"</a>"))}a.append(s)}i.append(a)},create:function(n,i){void 0==i&&(i=3),/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)&&(i=1);var o=e(n).data("e_id");e("#"+o).bind("contextmenu",function(e){e.preventDefault()}),e(n).mousedown(function(){/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)||e("#"+o).hide()}),e(n).bind("contextmenu",function(e){e.preventDefault()}),e(document).mousedown(function(){/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)||e("#"+o).hide()}),/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)&&(e("#"+o).mousedown(function(){e("#"+o).hide()}),e(document).mousedown(function(){e(".bootstrap-contextmenu").hide()})),e(n).mousedown(function(d){/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)||e(".bootstrap-contextmenu").hide();var a=d;d.stopPropagation(),e(this).mouseup(function(d){if(d.stopPropagation(),e(this).unbind("mouseup"),a.which==i){if(void 0!=t[o]){var r=t[o];r(e(n))}var s,c,l={};self.innerHeight?(l.pageYOffset=self.pageYOffset,l.pageXOffset=self.pageXOffset,l.innerHeight=self.innerHeight,l.innerWidth=self.innerWidth):document.documentElement&&document.documentElement.clientHeight?(l.pageYOffset=document.documentElement.scrollTop,l.pageXOffset=document.documentElement.scrollLeft,l.innerHeight=document.documentElement.clientHeight,l.innerWidth=document.documentElement.clientWidth):document.body&&(l.pageYOffset=document.body.scrollTop,l.pageXOffset=document.body.scrollLeft,l.innerHeight=document.body.clientHeight,l.innerWidth=document.body.clientWidth),s=d.pageX?d.pageX:d.clientX,c=d.pageY?d.pageY:d.clientY;var u=e("#x-context-"+e(n).attr("id")).height();/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)&&"block"==e("#"+o).css("display")?e(".bootstrap-contextmenu").hide():c+u>e(document).height()?e("#"+o).css({top:c-u,left:s}).fadeIn(20):e("#"+o).css({top:c,left:s}).fadeIn(20)}})})},guid:function(){var e=function(){return Math.floor(65536*Math.random()).toString(16)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}};e.fn.contextMenu=function(i,o){if(o=void 0!=o?o:"","string"==typeof i&&""!=o){var d=e(this).data("e_id"),a=e(this).data("e");if("string"==typeof d&&""!=d){if("function"!=typeof o){var r=[];if(o.indexOf(">")>0){var s=o.split(">");for(var c in s)r[r.length]=e.trim(s[c])}else r[r.length]=e.trim(o)}switch(i){case"disable":e("#"+d).remove();var l=a,u=r.length-1;for(var c in r){if(void 0==l[r[c]])break;if(c==u)l[r[c]].disabled=!0;else{if(void 0==l[r[c]].children)break;l=l[r[c]].children}}n.init(this,a);break;case"enable":e("#"+d).remove();var l=a,u=r.length-1;for(var c in r){if(void 0==l[r[c]])break;if(c==u)l[r[c]].disabled=!1;else{if(void 0==l[r[c]].children)break;l=l[r[c]].children}}n.init(this,a);break;case"beforeDisplay":"function"==typeof o&&(t[d]=o)}}}else if("object"==typeof i)return e(this).each(function(){n.init(this,i)})}}(jQuery);